<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Wish_APP</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200;300;400;500&family=Ma+Shan+Zheng&family=Long+Cang&family=Playfair+Display:ital,wght@0,300;0,400;1,300&family=Crimson+Text:ital,wght@0,400;1,300&family=ZCOOL+XiaoWei&family=Noto+Sans+SC:wght@300;400;500&family=Source+Serif+Pro:ital,wght@0,300;0,400;1,300&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Serif SC', serif;
            font-weight: 300;
            overflow: hidden;
            background: #000;
        }

        .page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            display: none;
        }

        .page.active {
            display: block;
        }

        /* é¡µé¢1ï¼šè§†é¢‘é¡µ */
        .video-page {
            background: #000;
        }

        .video-container {
            position: relative;
            width: 100%;
            height: 100vh;
            overflow: hidden;
            z-index: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .video-bg {
            width: auto;
            height: 100vh;
            max-width: 100%;
            object-fit: contain;
            object-position: center;
        }

        .wish-button {
            position: fixed;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(74, 144, 226, 0.3);
            color: #4A90E2;
            border: none;
            padding: 14px 28px;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Noto Sans SC', 'ZCOOL XiaoWei', sans-serif;
            font-size: 16px;
            font-weight: 500;
            letter-spacing: 1.5px;
            backdrop-filter: blur(15px);
            z-index: 1000;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(74, 144, 226, 0.3);
            pointer-events: auto;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
        }

        .button-text-chinese {
            font-size: 16px;
            font-weight: 700;
            line-height: 1.2;
            color: #4A90E2;
        }

        .button-text-english {
            font-size: 12px;
            font-weight: 700;
            font-style: italic;
            opacity: 0.9;
            line-height: 1.2;
            color: #4A90E2;
        }

        .wish-button:hover {
            transform: translateX(-50%) translateY(-2px);
            background: rgba(74, 144, 226, 0.5);
        }

        .wish-button:active {
            transform: translateX(-50%) translateY(0);
        }

        /* é¡µé¢2ï¼šè®¸æ„¿é¡µ */
        .wish-page {
            background: #000;
            position: relative;
            overflow: hidden;
        }

        .wish-page::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            z-index: 0;
            animation: whiteFlash 3s ease-in-out infinite;
        }

        @keyframes whiteFlash {
            0%, 100% {
                opacity: 0;
            }
            50% {
                opacity: 0.3;
            }
        }

        .wish-bg-video {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: auto;
            height: 100vh;
            max-width: 100%;
            object-fit: contain;
            object-position: center;
            z-index: 1;
        }

        .wish-content {
            position: relative;
            z-index: 2;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .wish-text {
            text-align: center;
            max-width: 90%;
            font-weight: 400;
        }

        .chinese-text {
            font-family: 'ZCOOL XiaoWei', 'Ma Shan Zheng', 'Long Cang', cursive;
            font-size: 48px;
            font-weight: 700;
            letter-spacing: 6px;
            line-height: 1.6;
            margin-bottom: 20px;
            text-shadow: 0 4px 20px rgba(255,182,193,0.8), 0 8px 35px rgba(255,105,180,0.6);
            color: #ff6b9d;
        }

        .english-text {
            font-family: 'Source Serif Pro', 'Crimson Text', 'Playfair Display', serif;
            font-size: 30px;
            font-weight: 600;
            font-style: italic;
            letter-spacing: 3px;
            opacity: 0.9;
            line-height: 1.5;
            color: #ff8fab;
            text-shadow: 0 3px 12px rgba(255,182,193,0.6);
        }

        .char {
            display: inline-block;
            opacity: 0;
            transform: translateY(100px) scale(0.5);
            animation: charFlyIn 1.5s ease-out forwards;
            margin: 0 1px;
        }

        @keyframes charFlyIn {
            0% {
                opacity: 0;
                transform: translateY(100px) scale(0.5);
            }
            70% {
                transform: translateY(-10px) scale(1.1);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .char.glow {
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.9), 0 0 30px rgba(255, 182, 193, 0.6);
        }

        .back-button {
            position: absolute;
            top: 30px;
            left: 20px;
            background: rgba(74, 144, 226, 0.3);
            color: #4A90E2;
            border: none;
            padding: 14px 28px;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Noto Sans SC', 'ZCOOL XiaoWei', sans-serif;
            font-size: 16px;
            font-weight: 500;
            letter-spacing: 1.5px;
            backdrop-filter: blur(15px);
            z-index: 20;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(74, 144, 226, 0.3);
        }

        .back-button:hover {
            background: rgba(74, 144, 226, 0.5);
            transform: translateY(-2px);
        }

        /* AIèŠå¤©å¯¹è¯æ¡†æ ·å¼ */
        .ai-chat-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            height: 500px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            z-index: 1000;
            display: none;
            flex-direction: column;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .ai-chat-container.open {
            display: flex;
        }

        .chat-header {
            background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 20px 20px 0 0;
        }

        .chat-title {
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .connection-status {
            font-size: 12px;
            opacity: 0.8;
            margin-left: 8px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .status-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #4CAF50;
            animation: pulse 2s infinite;
        }

        .status-dot.offline {
            background: #f44336;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7);
            }
            70% {
                box-shadow: 0 0 0 6px rgba(76, 175, 80, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(76, 175, 80, 0);
            }
        }

        .chat-close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: background 0.3s ease;
        }

        .chat-close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: rgba(248, 249, 250, 0.3);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.4;
            animation: messageSlideIn 0.3s ease-out;
        }

        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            background: rgba(74, 144, 226, 0.8);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 4px;
            backdrop-filter: blur(10px);
        }

        .message.ai {
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            align-self: flex-start;
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .chat-input-container {
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.8);
            border-top: 1px solid rgba(233, 236, 239, 0.5);
            display: flex;
            gap: 10px;
            align-items: center;
            backdrop-filter: blur(10px);
        }

        .chat-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s ease;
            background: #f8f9fa;
        }

        .chat-input:focus {
            border-color: #4A90E2;
            background: white;
        }

        .chat-send-btn {
            background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
            color: white;
            border: none;
            padding: 12px 16px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            transition: transform 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 44px;
            height: 44px;
        }

        .chat-send-btn:hover {
            transform: scale(1.05);
        }

        .chat-send-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .chat-voice-btn {
            background: linear-gradient(135deg, #FF6B6B, #E55353);
            color: white;
            border: none;
            padding: 12px 16px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            transition: transform 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 44px;
            height: 44px;
        }

        .chat-voice-btn:hover {
            transform: scale(1.05);
        }

        .chat-voice-btn.recording {
            background: linear-gradient(135deg, #28A745, #1E7E34);
            animation: pulse 1.5s infinite;
        }

        .chat-voice-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .voice-status {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 1000;
        }

        .chat-toggle-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            width: auto;
            height: 50px;
            background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
            border: none;
            border-radius: 25px;
            color: white;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(74, 144, 226, 0.4);
            z-index: 999;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 20px;
            gap: 8px;
            font-family: 'Noto Sans SC', sans-serif;
            font-weight: 500;
        }

        .chat-toggle-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(74, 144, 226, 0.6);
        }

        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 12px 16px;
            background: white;
            border-radius: 18px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            align-self: flex-start;
            max-width: 80px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #999;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.5;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }



        /* ç§»åŠ¨ç«¯é€‚é… */
        @media (max-width: 768px) {
            .video-container {
                height: 100vh;
                width: 100vw;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .video-bg {
                width: auto;
                height: 100vh;
                max-width: 100%;
                object-fit: contain;
                object-position: center;
            }
            
            .wish-bg-video {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: auto;
                height: 100vh;
                max-width: 100%;
                object-fit: contain;
                object-position: center;
            }
            
            .wish-text {
                font-size: 30px;
                line-height: 1.6;
            }
            
            .wish-button {
                padding: 12px 30px;
                font-size: 16px;
                bottom: 50px;
            }
            
            .char {
                font-size: 30px;
            }

            .back-button {
                padding: 10px 20px;
                font-size: 13px;
            }

            /* ç§»åŠ¨ç«¯èŠå¤©å¯¹è¯æ¡†é€‚é… */
            .ai-chat-container {
                width: 90vw;
                height: 80vh;
                top: 10vh;
                left: 5vw;
                bottom: auto;
                right: auto;
                border-radius: 15px;
            }

            .chat-toggle-btn {
                top: 20px;
                right: 15px;
                width: auto;
                height: 45px;
                font-size: 12px;
                padding: 0 15px;
                gap: 6px;
            }

            /* ä¸­ç­‰å±å¹•è¾“å…¥åŒºåŸŸé€‚é… */
            .chat-input-container {
                padding: 12px 15px;
                gap: 8px;
                flex-wrap: nowrap;
            }

            .chat-input {
                padding: 10px 12px;
                font-size: 13px;
                border-radius: 20px;
                min-width: 0;
                flex: 1;
            }

            .chat-voice-btn,
            .chat-send-btn {
                width: 42px;
                height: 42px;
                padding: 10px;
                font-size: 15px;
                flex-shrink: 0;
            }
        }

        @media (max-width: 480px) {
            .video-container {
                height: 100vh;
                width: 100vw;
                overflow: hidden;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .video-bg {
                width: auto;
                height: 100vh;
                max-width: 100%;
                object-fit: contain;
                object-position: center;
            }
            
            .wish-bg-video {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: auto;
                height: 100vh;
                max-width: 100%;
                object-fit: contain;
                object-position: center;
            }
            
            .wish-text {
                font-size: 27px;
                line-height: 1.5;
            }
            
            .wish-button {
                padding: 10px 25px;
                font-size: 14px;
                bottom: 40px;
            }
            
            .char {
                font-size: 27px;
            }

            .back-button {
                padding: 8px 16px;
                font-size: 12px;
                top: 20px;
                left: 15px;
            }

            /* å°å±å¹•èŠå¤©å¯¹è¯æ¡†é€‚é… */
            .ai-chat-container {
                width: 95vw;
                height: 85vh;
                top: 7.5vh;
                left: 2.5vw;
                bottom: auto;
                right: auto;
                border-radius: 12px;
            }

            .chat-toggle-btn {
                top: 15px;
                right: 10px;
                width: auto;
                height: 40px;
                font-size: 11px;
                padding: 0 12px;
                gap: 4px;
            }

            .chat-messages {
                padding: 15px;
            }

            .message {
                font-size: 13px;
                padding: 10px 14px;
            }

            /* ç§»åŠ¨ç«¯è¾“å…¥åŒºåŸŸé€‚é… */
            .chat-input-container {
                padding: 12px 15px;
                gap: 8px;
                flex-wrap: nowrap;
            }

            .chat-input {
                padding: 10px 12px;
                font-size: 13px;
                border-radius: 20px;
                min-width: 0;
                flex: 1;
            }

            .chat-voice-btn,
            .chat-send-btn {
                width: 40px;
                height: 40px;
                padding: 8px;
                font-size: 14px;
                flex-shrink: 0;
            }

        }

        /* ç§»åŠ¨ç«¯é”®ç›˜å¼¹å‡ºæ—¶çš„é€‚é… */
        @media (max-width: 768px) and (orientation: portrait) {
            .ai-chat-container {
                height: 70vh !important;
                top: 15vh !important;
            }
            
            .chat-messages {
                max-height: calc(70vh - 120px);
                overflow-y: auto;
            }
        }

        @media (max-width: 480px) and (orientation: portrait) {
            .ai-chat-container {
                height: 65vh !important;
                top: 17.5vh !important;
            }
            
            .chat-messages {
                max-height: calc(65vh - 100px);
                overflow-y: auto;
            }
        }

        /* ç²’å­èƒŒæ™¯æ•ˆæœ */
        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 2;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            animation: float 8s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
                opacity: 0.7;
            }
            50% {
                transform: translateY(-30px) rotate(180deg);
                opacity: 1;
            }
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            font-size: 18px;
            color: #666;
        }

        .loading::after {
            content: '';
            width: 20px;
            height: 20px;
            border: 2px solid #ff9a9e;
            border-top: 2px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- é¡µé¢1ï¼šè§†é¢‘é¡µ -->
    <div class="page video-page active" id="videoPage">
        <div class="video-container">
            <video class="video-bg" autoplay loop muted playsinline>
                <source src="video1.mp4" type="video/mp4">
                æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾
            </video>
        </div>
        <button class="wish-button" id="wishBtn">
            <div class="button-text-chinese">å¯»æ‰¾ä½ çš„ç­”æ¡ˆ</div>
            <div class="button-text-english">Find your solution</div>
        </button>
    </div>

    <!-- é¡µé¢2ï¼šè®¸æ„¿é¡µ -->
    <div class="page wish-page" id="wishPage">
        <!-- è®¸æ„¿é¡µèƒŒæ™¯è§†é¢‘ -->
        <video class="wish-bg-video" autoplay loop muted playsinline>
            <source src="video2.mp4" type="video/mp4">
        </video>
        
        <div class="particles" id="particles"></div>
        <button class="back-button" onclick="goToVideoPage()">è¿”å›</button>
        <div class="wish-content">
            <div class="loading" id="loading" style="display: none;">æ­£åœ¨è·å–ç­”æ¡ˆ...</div>
            <div class="wish-text" id="wishText"></div>
        </div>
        
        <!-- AIèŠå¤©å¯¹è¯æ¡† -->
        <button class="chat-toggle-btn" id="chatToggleBtn" onclick="toggleChat()">
            <span>æœˆæœˆé™ªä¼´</span>
            <span>ğŸ’¬</span>
        </button>
        
        <div class="ai-chat-container" id="chatContainer">
            <div class="chat-header">
                <div class="chat-title">
                    ğŸ° æœˆæœˆChat
                    <div class="connection-status">
                        <div class="status-dot" id="statusDot"></div>
                        <span id="statusText">è¿æ¥ä¸­...</span>
                    </div>
                </div>
                <button class="chat-close-btn" onclick="toggleChat()">Ã—</button>
            </div>
            
            <div class="chat-messages" id="chatMessages">
                <div class="message ai">
                    ä½ å¥½å‘€ï¼Œæˆ‘æ˜¯æœˆæœˆï¼å¦‚æœä½ æœ‰ä»€ä¹ˆä¸å¼€å¿ƒçš„äº‹ï¼Œè·Ÿæˆ‘è¯´è¯´å§ï¼Œæˆ‘ä¼šè®¤çœŸå¬ï¼Œä¸€ç›´é™ªç€ä½ å‘€ï½
                </div>
            </div>
            
            <div class="chat-input-container">
                <input type="text" class="chat-input" id="chatInput" placeholder="è¾“å…¥ä½ çš„é—®é¢˜..." maxlength="500">
                <button class="chat-voice-btn" id="chatVoiceBtn" onclick="toggleVoiceRecording()" title="è¯­éŸ³è¾“å…¥">
                    ğŸ¤
                </button>
                <button class="chat-send-btn" id="chatSendBtn" onclick="sendMessage()">
                    â¤
                </button>
            </div>
        </div>
    </div>

    <!-- èƒŒæ™¯éŸ³ä¹ -->
    <audio id="backgroundMusic" loop preload="auto" style="display: none;">
        <source src="music.mp3" type="audio/mpeg">
        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾
    </audio>

    <script>
        // å­˜å‚¨æ‰€æœ‰ç­”æ¡ˆ
        let allAnswers = [];
        let currentAnswer = '';

        // AIèŠå¤©ç›¸å…³å˜é‡
        let isChatOpen = false;
        let chatHistory = [];
        let lastMessage = ''; // è®°å½•ä¸Šä¸€æ¡æ¶ˆæ¯ï¼Œé¿å…é‡å¤
        let requestCount = 0; // è¯·æ±‚è®¡æ•°
        
        // è¯­éŸ³åŠŸèƒ½ç›¸å…³å˜é‡
        let isRecording = false;
        let recognition = null;
        let speechSynthesis = window.speechSynthesis;
        let currentUtterance = null;
        
        // Coze BOTé…ç½®ï¼ˆé¢„ç•™æ¥å£ï¼‰
        const COZE_CONFIG = {
            botId: '7549780494092189748', // å¡«å…¥ä½ çš„BOT ID
            apiKey: 'pat_fuWcCKzmVCdYVlZjpEwCQVnHnoUOfbuGAk347sB0vMWaeBkBUs5ozp7JMYbSrSzh', // å¡«å…¥ä½ çš„APIå¯†é’¥
            baseUrl: 'https://api.coze.cn/open_api/v2/chat', // Coze APIåœ°å€ - ä½¿ç”¨v2ç‰ˆæœ¬
            enabled: true // å¯ç”¨çœŸå®API
        };

        // è®¸æ„¿ç­”æ¡ˆæ•°æ®ï¼ˆåŒ…å«ä¸­è‹±æ–‡ï¼‰
        const wishAnswers = [
            { chinese: "å¯»æ±‚æ›´å¤šçš„é€‰æ‹©", english: "Seek more options" },
            { chinese: "ä¸", english: "No" },
            { chinese: "åˆ«å¿½è§†æ˜¾è€Œæ˜“è§çš„ä¸œè¥¿", english: "Don't ignore the obvious" },
            { chinese: "ç»“æœå¯èƒ½ä»¤äººåƒæƒŠ", english: "The result may be surprising" },
            { chinese: "æœ‰å†³å¿ƒå°±èƒ½æˆåŠŸ", english: "Success comes with determination" },
            { chinese: "åšä¸€æ¬¡æ”¹å˜", english: "Make a change" },
            { chinese: "ç…§åˆ«äººå‘Šè¯‰ä½ çš„å»åš", english: "Do as you're told" },
            { chinese: "ä¸èƒ½ä¿è¯", english: "No guarantee" },
            { chinese: "ç­”æ¡ˆå¯èƒ½ä¼šä»¥å¦ä¸€ç§å½¢å¼å‡ºç°", english: "The answer may come in another form" },
            { chinese: "æ¯«æ— ç–‘é—®", english: "Without a doubt" },
            { chinese: "è¿™æ ·åšä¼šä½¿äº‹æƒ…å˜å¾—æœ‰è¶£", english: "This will make things interesting" },
            { chinese: "è¿™æ˜¯è‚¯å®šçš„", english: "This is certain" },
            { chinese: "æœ‰å¯èƒ½ä¼šä¼¤å®³åˆ°ä»–äºº", english: "It might hurt others" },
            { chinese: "å…¨èº«å¿ƒæŠ•å…¥å°†èµ¢å¾—å¥½ç»“æœ", english: "Full commitment will bring good results" },
            { chinese: "é‡‡å–å†’é™©çš„æ€åº¦", english: "Take a risk" },
            { chinese: "æœ€å¥½ç­‰å¾…", english: "Better to wait" },
            { chinese: "å¯èƒ½ä¼šæƒ¹ä¸Šéº»çƒ¦", english: "You might get into trouble" },
            { chinese: "ä½ éœ€è¦é‡‡å–ä¸»åŠ¨", english: "You need to take initiative" },
            { chinese: "ä¼¼ä¹æ²¡é—®é¢˜", english: "Seems fine" },
            { chinese: "å½“ç„¶", english: "Of course" },
            { chinese: "ä¸è¦åœ¨æ„", english: "Don't worry about it" },
            { chinese: "å°½æ—©åšå¥½å®ƒ", english: "Do it as soon as possible" },
            { chinese: "ä½ ç»ˆä¼šå‘ç°ä½ æƒ³çŸ¥é“çš„ä¸€åˆ‡", english: "You'll eventually find out everything you want to know" },
            { chinese: "é™¤éä½ ç‹¬è‡ªä¸€äºº", english: "Unless you're alone" },
            { chinese: "æ˜¯ï¼Œä½†ä¸è¦å¼ºæ±‚", english: "Yes, but don't force it" },
            { chinese: "ä½ éœ€è¦å»é€‚åº”", english: "You need to adapt" },
            { chinese: "æ˜å¤©å†æ¥è¯•è¯•", english: "Try again tomorrow" },
            { chinese: "ä»¥æ›´æ”¾æ¾çš„æ€åº¦å»é¢å¯¹", english: "Face it with a more relaxed attitude" },
            { chinese: "ä½ éœ€è¦è€ƒè™‘å…¶ä»–æ–¹æ³•", english: "You need to consider other methods" },
            { chinese: "åœ¨ä¹ æƒ¯ä¸­æ¥å—ä¸€äº›æ”¹å˜", english: "Accept some changes in your routine" },
            { chinese: "è¦çŸ¥é“é€‰æ‹©å¤ªå¤šå’Œé€‰æ‹©å¤ªå°‘ä¸€æ ·å¾ˆéš¾", english: "Too many choices are as difficult as too few" },
            { chinese: "åˆ«æµªè´¹æ—¶é—´äº†", english: "Don't waste time" },
            { chinese: "æ˜¯", english: "Yes" },
            { chinese: "èŠ±æ›´å¤šæ—¶é—´æ¥å†³å®š", english: "Take more time to decide" },
            { chinese: "çµæ´»åº”å¯¹", english: "Be flexible" },
            { chinese: "ä¼¼ä¹å·²æˆäº‹å®", english: "It seems to be a fact" },
            { chinese: "çœ‹å¼€ä¸€ç‚¹", english: "Look at it differently" },
            { chinese: "é—®é—®ä½ çš„å¼‚æ€§åŒäº‹", english: "Ask your opposite-sex colleague" },
            { chinese: "æŸ³æš—èŠ±æ˜åˆä¸€æ‘", english: "Every cloud has a silver lining" },
            { chinese: "ä½ ä¼šåæ‚”çš„", english: "You'll regret it" },
            { chinese: "é¿å…ç¬¬ä¸€ä¸ªè§£å†³åŠæ³•", english: "Avoid the first solution" },
            { chinese: "éšå®ƒå»å§", english: "Let it go" },
            { chinese: "è¿‡æ®µæ—¶é—´å°±ä¸é‚£ä¹ˆé‡è¦äº†", english: "It won't matter as much later" },
            { chinese: "æ‹­ç›®ä»¥å¾…", english: "Wait and see" },
            { chinese: "ç›¸ä¿¡ä½ æœ€åˆçš„æƒ³æ³•", english: "Trust your initial thoughts" },
            { chinese: "è¯·ä¸è¦æŠ—æ‹’", english: "Please don't resist" },
            { chinese: "è¿™ä¼šå¸¦æ¥å¥½è¿", english: "This will bring good luck" },
            { chinese: "é‚£ä¸€å®šå¾ˆæ£’", english: "That must be great" },
            { chinese: "æŠŠå®ƒè®°ä¸‹æ¥", english: "Write it down" },
            { chinese: "å¯èƒ½å‘ç”Ÿå°æ„å¤–", english: "A small accident might happen" },
            { chinese: "å­¦ä¹ å¹¶äº«å—å®ƒ", english: "Learn and enjoy it" },
            { chinese: "è¿™å…·æœ‰é‡è¦æ„ä¹‰", english: "This has great significance" },
            { chinese: "é˜²å¤‡æ„å¤–å‘ç”Ÿ", english: "Be prepared for accidents" },
            { chinese: "ä¸€åˆ‡å°†ä¾èµ–äºä½ çš„é€‰æ‹©", english: "Everything depends on your choice" },
            { chinese: "è½¬ç§»æ³¨æ„åŠ›", english: "Divert your attention" },
            { chinese: "ç¦»å¼€", english: "Leave" },
            { chinese: "ä½ éœ€è¦å…¶ä»–äººçš„å¸®åŠ©", english: "You need help from others" },
            { chinese: "è¿™æœ‰äº›ç‰¹åˆ«", english: "This is somewhat special" },
            { chinese: "ä¸è¦çŠ¹è±«", english: "Don't hesitate" },
            { chinese: "å…ˆå®Œæˆå…¶ä»–äº‹", english: "Finish other things first" },
            { chinese: "ç»™è‡ªå·±ä¸€ç‚¹æ—¶é—´", english: "Give yourself some time" },
            { chinese: "ç°åœ¨ä½ å°±èƒ½", english: "You can now" },
            { chinese: "é‚£ä¸å€¼å¾—çº ç»“", english: "It's not worth worrying about" },
            { chinese: "é‚£å°†å½±å“åˆ«äººå¯¹ä½ çš„çœ‹æ³•", english: "It will affect how others see you" },
            { chinese: "ç…§åˆ«äººè¯´çš„å»åš", english: "Do as others say" },
            { chinese: "è½¬ç§»ä½ çš„æ³¨æ„åŠ›", english: "Shift your attention" },
            { chinese: "ä½ ä¼šå¤±æœ›çš„", english: "You'll be disappointed" },
            { chinese: "æœ€å¥½å…³æ³¨ä½ çš„å·¥ä½œ", english: "Better focus on your work" },
            { chinese: "å½¢å¼å°šä¸æ˜æœ—", english: "The situation is unclear" },
            { chinese: "ä¸è¦æŠ±æœ‰æˆè§", english: "Don't be prejudiced" },
            { chinese: "ä½ å¿…é¡»ç°åœ¨å°±è¡ŒåŠ¨", english: "You must act now" },
            { chinese: "é‚£å¯èƒ½å¾ˆéš¾ï¼Œä½†å€¼å¾—", english: "It might be hard, but it's worth it" },
            { chinese: "ä»˜å‡ºå°±ä¼šæœ‰å›æŠ¥", english: "Effort will be rewarded" },
            { chinese: "å¯¹æ„å¤–è¦æœ‰æ€æƒ³å‡†å¤‡", english: "Be mentally prepared for surprises" },
            { chinese: "æ›´ç»†å¿ƒåœ°å»å€¾å¬ï¼Œä½ å°±ä¼šçŸ¥é“", english: "Listen more carefully and you'll know" },
            { chinese: "ä¸”è¡Œä¸”æ€", english: "Think as you go" },
            { chinese: "ä½ æœ‰èƒ½åŠ›ä»¥ä»»ä½•æ–¹å¼æ”¹å–„", english: "You have the ability to improve in any way" },
            { chinese: "è¿™æ˜¯ä½ ä¸ä¼šå¿˜è®°çš„äº‹ç‰©", english: "This is something you won't forget" },
            { chinese: "å±¥è¡Œä½ çš„ä¹‰åŠ¡", english: "Fulfill your obligations" },
            { chinese: "å¿«åˆ€æ–©ä¹±éº»", english: "Cut the Gordian knot" },
            { chinese: "åˆ«åœ¨è¿™ä¸Šé¢ä¸‹èµŒæ³¨", english: "Don't bet on this" },
            { chinese: "ä¹Ÿè®¸å§", english: "Maybe" },
            { chinese: "ä¸“æ³¨äºä½ çš„å®¶åº­ç”Ÿæ´»", english: "Focus on your family life" },
            { chinese: "ç»å¯¹ä¸", english: "Absolutely not" },
            { chinese: "ç­‰å¾…", english: "Wait" },
            { chinese: "åˆ«çŠ¯å‚»äº†", english: "Don't be silly" },
            { chinese: "å¯èƒ½å§", english: "Possibly" },
            { chinese: "è¡¨ç¤ºæ€€ç–‘", english: "Express doubt" },
            { chinese: "æ„ä¹‰éå‡¡", english: "Extraordinarily meaningful" },
            { chinese: "é‚£å¯èƒ½éåŒå¯»å¸¸", english: "That might be extraordinary" },
            { chinese: "ä¸å¯èƒ½å¤±è´¥", english: "Cannot fail" },
            { chinese: "ä½ éœ€è¦äº†è§£æ›´å¤š", english: "You need to learn more" },
            { chinese: "æƒ…å†µå¾ˆå¿«å°±ä¼šæœ‰å˜åŒ–", english: "The situation will change soon" },
            { chinese: "è¿™å¹¶ä¸é‡è¦", english: "This is not important" },
            { chinese: "é¡ºå…¶è‡ªç„¶", english: "Let nature take its course" },
            { chinese: "é—®é—®ä½ æœ€å¥½çš„æœ‹å‹", english: "Ask your best friend" },
            { chinese: "è¿™æ—¶ä¸è¦å†è‡ªæ‰¾éº»çƒ¦", english: "Don't look for trouble now" },
            { chinese: "æ™šä¸€ç‚¹å¤„ç†", english: "Handle it later" },
            { chinese: "å°è¯•ä¸€ç§æ›´å¯èƒ½çš„è§£å†³æ–¹æ¡ˆ", english: "Try a more likely solution" },
            { chinese: "å…ˆåšé‡è¦çš„äº‹", english: "Do important things first" },
            { chinese: "æŠ•ç¡¬å¸æ¥åšå†³å®šå§", english: "Flip a coin to decide" },
            { chinese: "è¿™ä¹Ÿå–å†³äºå¦ä¸€ç§æƒ…å†µ", english: "This also depends on another situation" },
            { chinese: "ä½ æœ€ç»ˆèƒ½å¦‚æ„¿", english: "You'll eventually get your wish" },
            { chinese: "å¯è¡Œ", english: "Feasible" },
            { chinese: "ç­”æ¡ˆå°±åœ¨ä½ å®¶çª—å¤–", english: "The answer is outside your window" },
            { chinese: "ç°åœ¨çš„ä½ æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½æ¸…æ¥š", english: "You're clearer now than ever before" },
            { chinese: "åªéœ€è¯´å£°è°¢è°¢", english: "Just say thank you" },
            { chinese: "æˆ–è®¸ï¼Œç­‰ä½ å†å¹´é•¿äº›å°±æ˜ç™½äº†", english: "Perhaps you'll understand when you're older" },
            { chinese: "è¿™å°†è½°åŠ¨ä¸€æ—¶", english: "This will cause a sensation" },
            { chinese: "æ”¾æ‰‹ä¸€æ", english: "Take a chance" },
            { chinese: "äº‹æƒ…ä¼šæœç›®æ ‡å‘å±•", english: "Things will develop toward the goal" },
            { chinese: "æ›´ç»†å¿ƒå»äº†è§£ï¼Œä½ å°±çŸ¥é“è¯¥æ€ä¹ˆåšäº†", english: "Be more careful to understand, then you'll know what to do" },
            { chinese: "éœ€è¦åšæ›´å¤šçš„åŠªåŠ›", english: "More effort is needed" },
            { chinese: "ç­‰å¾…ä¸€ä¸ªæ›´å¥½çš„æœºä¼š", english: "Wait for a better opportunity" },
            { chinese: "æ•°åˆ°5ï¼Œå†è¯•ä¸€æ¬¡", english: "Count to 5, then try again" },
            { chinese: "ä½ ä¸å¾—ä¸å¦¥å", english: "You have to compromise" },
            { chinese: "å¾ˆå¿«å°±èƒ½è§£å†³", english: "It will be solved soon" },
            { chinese: "ååˆ†ç¡®å®š", english: "Very certain" },
            { chinese: "è¿™è¿˜ä¸ç¡®å®š", english: "This is still uncertain" },
            { chinese: "è°¨æ…å¤„ç†", english: "Handle with caution" },
            { chinese: "å…¨åŠ›ä»¥èµ´", english: "Give it your all" },
            { chinese: "é‡æ–°è€ƒè™‘ä½ çš„åšæ³•", english: "Reconsider your approach" },
            { chinese: "é—®é—®ä½ çš„æ¯äº²å§", english: "Ask your mother" },
            { chinese: "å¦‚æœä½ ç‹¬è‡ªä¸€äººå°±ä¸è¦", english: "Don't if you're alone" },
            { chinese: "æ— éœ€æ‹…å¿§", english: "No need to worry" },
            { chinese: "ä¿æŒå¼€æ”¾çš„å¿ƒæ€", english: "Keep an open mind" },
            { chinese: "ä½ ä¼šä¸ºè‡ªå·±æ‰€åšçš„æ„Ÿåˆ°é«˜å…´çš„", english: "You'll be glad for what you did" },
            { chinese: "å‘æŒ¥ä½ çš„æƒ³è±¡åŠ›", english: "Use your imagination" },
            { chinese: "çŒ®å‡ºä½ çš„ä¸€åˆ‡", english: "Give everything you have" },
            { chinese: "é¡ºä»ä½ çš„æ„æ„¿", english: "Follow your will" },
            { chinese: "å…ˆåšå¥½è‡ªå·±çš„äº‹", english: "Take care of your own business first" },
            { chinese: "ä¸è¦æ€€ç–‘", english: "Don't doubt" },
            { chinese: "æ˜¯æ—¶å€™åšæ–°æ‰“ç®—äº†", english: "Time to make new plans" },
            { chinese: "çœçœåŠ›æ°”å§", english: "Save your energy" },
            { chinese: "åˆä½œå°†æ˜¯å…³é”®", english: "Cooperation will be key" },
            { chinese: "æ­¤æ—¶ä¸å®œ", english: "Not suitable at this time" },
            { chinese: "æŠŠè¿™çœ‹åšä¸€æ¬¡æœºä¼š", english: "See this as an opportunity" },
            { chinese: "è«ç­‰å¾…", english: "Don't wait" },
            { chinese: "ä½ å¯èƒ½ä¸å¾—ä¸æ”¾å¼ƒå…¶ä»–ä¸œè¥¿", english: "You might have to give up other things" },
            { chinese: "éµå®ˆè§„åˆ™", english: "Follow the rules" },
            { chinese: "ç›¸å…³é—®é¢˜å¯èƒ½ä¼šå‡ºç°", english: "Related issues may arise" },
            { chinese: "äº‹æƒ…å°†å¦‚ä½ æ‰€æ„¿", english: "Things will go as you wish" },
            { chinese: "èµŒä¸€æŠŠ", english: "Take a gamble" },
            { chinese: "ä»¥åå†å¤„ç†", english: "Handle it later" },
            { chinese: "ç»“æœæ˜¯ä¹è§‚çš„", english: "The result is optimistic" },
            { chinese: "æœŸå¾…è§£å†³", english: "Expect a solution" },
            { chinese: "çµæ´»åº”å¯¹", english: "Respond flexibly" },
            { chinese: "æ³¨æ„ç»†èŠ‚", english: "Pay attention to details" },
            { chinese: "ä½ çš„è¡ŒåŠ¨ä¼šä½¿ä¸€åˆ‡å˜å¥½", english: "Your actions will make everything better" },
            { chinese: "ç­”æ¡ˆå°±åœ¨å…¬å›­é‡Œ", english: "The answer is in the park" },
            { chinese: "æ¶ˆé™¤ä½ è‡ªèº«çš„éšœç¢", english: "Remove your own obstacles" },
            { chinese: "è¿™æ˜¯ä¸æ˜æ™ºçš„", english: "This is unwise" },
            { chinese: "å°†éœ€è¦å¤§é‡çš„åŠªåŠ›", english: "Will require great effort" },
            { chinese: "ä¸è¦å‹‰å¼ºè‡ªå·±", english: "Don't force yourself" },
            { chinese: "æ˜¯æ—¶å€™åšæ‰“ç®—äº†", english: "Time to make plans" },
            { chinese: "åˆ«å†çŠ¹è±«äº†", english: "Stop hesitating" },
            { chinese: "äº«å—è¿™æ¬¡ä½“éªŒ", english: "Enjoy this experience" },
            { chinese: "è¦ä»˜å‡ºåšæŒä¸æ‡ˆçš„åŠªåŠ›", english: "Persistent effort is required" },
            { chinese: "é‚£ä»æ—§æ— æ³•é¢„æµ‹", english: "That's still unpredictable" },
            { chinese: "æ¯‹åº¸ç½®ç–‘", english: "Beyond doubt" },
            { chinese: "å¤šèŠ±ç‚¹æ—¶é—´æ¥åšå†³å®š", english: "Take more time to decide" },
            { chinese: "åªåšè¿™ä¸€æ¬¡", english: "Only do this once" },
            { chinese: "è¿™æ˜¯ä¸æ˜æ™ºçš„", english: "This is unwise" },
            { chinese: "åšäº›æ”¹å˜", english: "Make some changes" },
            { chinese: "å¯è¡Œ", english: "Feasible" },
            { chinese: "å…ˆåšå¥½å…¶ä»–äº‹", english: "Do other things first" },
            { chinese: "ä¸è¦é™·å…¥åˆ°æƒ…ç»ªä¹‹ä¸­", english: "Don't get caught up in emotions" },
            { chinese: "ç›¸ä¿¡ä½ çš„ç›´è§‰", english: "Trust your intuition" },
            { chinese: "é‡‡çº³æ™ºè€…çš„å»ºè®®", english: "Take wise advice" },
            { chinese: "æƒ…å†µä¸æ˜äº†", english: "The situation is unclear" },
            { chinese: "ä½ ä¸å¾—ä¸å¦¥å", english: "You have to compromise" },
            { chinese: "åˆ—å‡ºå¦å®šçš„ç†ç”±", english: "List the negative reasons" },
            { chinese: "è¦æœ‰è€å¿ƒ", english: "Be patient" },
            { chinese: "ä¸€ç¬‘ç½®ä¹‹", english: "Laugh it off" },
            { chinese: "ç»§ç»­", english: "Continue" },
            { chinese: "ä½ å¿…é¡»éšæœºåº”å˜", english: "You must adapt" },
            { chinese: "åˆ«å¿˜è®°äº«å—ä¹è¶£", english: "Don't forget to have fun" },
            { chinese: "é‚£æ˜¯åœ¨æµªè´¹é‡‘é’±", english: "That's wasting money" },
            { chinese: "é‡è¦çš„ä¼˜å…ˆ", english: "Important things first" },
            { chinese: "ä¸ºäº†åšå‡ºæœ€å¥½çš„å†³å®šï¼ŒåŠ¡å¿…ä¿æŒå†·é™", english: "Stay calm to make the best decision" },
            { chinese: "å°è¯•ä¸€ä¸ªæ›´æ²¡æŠŠæ¡çš„æ–¹æ³•", english: "Try a more uncertain method" },
            { chinese: "æ¸…é™¤ä½ è‡ªèº«çš„éšœç¢", english: "Clear your own obstacles" },
            { chinese: "é‚£å¯èƒ½å·²æˆäº‹å®", english: "That might already be a fact" },
            { chinese: "ä¿å®ˆä½ çš„ç§˜å¯†", english: "Keep your secrets" },
            { chinese: "ä½ å¿…é¡»é©¬ä¸Šè¡ŒåŠ¨", english: "You must act immediately" },
            { chinese: "ä¸è¦å¦„ä¸‹èµŒæ³¨", english: "Don't make rash bets" },
            { chinese: "é‚£å¯èƒ½å·²æ— æ³•æ”¹å˜", english: "That might be unchangeable" },
            { chinese: "ä¸€äº›å¸®åŠ©èƒ½ç¡®ä¿ä½ æˆåŠŸ", english: "Some help will ensure your success" },
            { chinese: "ä½ è‚¯å®šä¼šè·å¾—æ”¯æŒ", english: "You'll definitely get support" },
            { chinese: "åªåšä¸€æ¬¡", english: "Only do it once" },
            { chinese: "éµå¾ªæ™ºè€…çš„å»ºè®®", english: "Follow wise advice" },
            { chinese: "å¦‚ä½ æ‰€æ„¿", english: "As you wish" },
            { chinese: "å½“å±€è€…è¿·", english: "Those involved are confused" },
            { chinese: "æ— è®ºä½ æ€ä¹ˆåšï¼Œç»“æœä¾æ—§", english: "No matter what you do, the result remains" },
            { chinese: "å…ˆä¸»åæ¬¡", english: "Important first, secondary later" },
            { chinese: "è¿™ä¼šè®©ä½ ä»˜å‡ºä»£ä»·", english: "This will cost you" },
            { chinese: "å°½æ—©è¡ŒåŠ¨", english: "Act as soon as possible" },
            { chinese: "å¯»æ±‚æ›´å¤šé€‰æ‹©", english: "Seek more options" },
            { chinese: "ä½ ç°åœ¨æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½æ¸…æ¥š", english: "You're clearer now than ever" },
            { chinese: "æå¯èƒ½å‘ç”Ÿäº‹æ•…", english: "An accident is very likely" },
            { chinese: "å¸¦ç€å¥½å¥‡å»æ¢ç´¢", english: "Explore with curiosity" },
            { chinese: "åˆ—å‡ºè¿™æ ·åšçš„ç†ç”±", english: "List the reasons for doing this" },
            { chinese: "é©¬ä¸Šåœä¸‹æ¥", english: "Stop immediately" },
            { chinese: "è¿™ä¸æ˜¯å¾ˆç¡®å®š", english: "This is not very certain" },
            { chinese: "ä¸ç”¨æ‹…å¿ƒ", english: "Don't worry" },
            { chinese: "ä¸è¦å‘Šè¯‰åˆ«äºº", english: "Don't tell others" },
            { chinese: "ä½ éœ€è¦å…¶ä»–äººçš„å¸®åŠ©", english: "You need help from others" },
            { chinese: "é‚£å°†æ˜¯ä¸€ä»¶ä¹äº‹", english: "That will be a pleasure" },
            { chinese: "ä¸è¦è¿«äºå‹åŠ›è‰ç‡è¡Œäº‹", english: "Don't act rashly under pressure" },
            { chinese: "ä¸è¦ç­‰å¾…", english: "Don't wait" },
            { chinese: "ä½ èƒ½ä»¥ä»»ä½•æ–¹å¼æ”¹å–„ç°çŠ¶", english: "You can improve the situation in any way" },
            { chinese: "ä½ ä¼šä¸ºæ­¤æ„Ÿåˆ°é«˜å…´", english: "You'll be happy about this" },
            { chinese: "æ”¾å¼ƒä¹‹å‰çš„æƒ³æ³•", english: "Abandon previous thoughts" },
            { chinese: "ä½ ä¸ä¼šå¿˜è®°è¿™äº›", english: "You won't forget these" },
            { chinese: "è°¨æ…å¯¹å¾…", english: "Handle with caution" },
            { chinese: "æ”¾å¼ƒä½ ç°åœ¨çš„æƒ³æ³•", english: "Abandon your current thoughts" },
            { chinese: "æœ‰ç†ç”±ä¿æŒä¹è§‚", english: "There's reason to be optimistic" },
            { chinese: "ä½ ä¼šå‘ç°è‡ªå·±éš¾ä»¥å¦¥å", english: "You'll find yourself hard to compromise" },
            { chinese: "æ”¹å˜ä¸ä¼šå¾ˆå¿«å‘ç”Ÿ", english: "Change won't happen quickly" },
            { chinese: "æœ‰äº›éšœç¢éœ€è¦å…‹æœ", english: "Some obstacles need to be overcome" },
            { chinese: "è€å¿ƒç‚¹", english: "Be patient" },
            { chinese: "æœæ–­æ”¾å¼ƒ", english: "Decisively give up" },
            { chinese: "æœ€å¥½æŠŠå¿ƒæ€æ”¾åœ¨å·¥ä½œä¸Š", english: "Better focus on work" },
            { chinese: "è¦åšå°±åšå¥½ï¼Œå¦åˆ™å°±ä¸è¦å»åš", english: "Do it well or don't do it at all" },
            { chinese: "æ·±è¡¨æ€€ç–‘", english: "Deeply suspicious" },
            { chinese: "æœ€å¥½çš„è§£å†³æ–¹æ³•å¯èƒ½ä¸å¤ªæ˜æ˜¾", english: "The best solution might not be obvious" },
            { chinese: "å·²è¶…å‡ºä½ çš„æ§åˆ¶", english: "Beyond your control" },
            { chinese: "çœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆ", english: "See what happens" },
            { chinese: "ä½ éœ€è¦æ›´å¤šä¿¡æ¯", english: "You need more information" },
            { chinese: "å¼€é˜”è§†é‡", english: "Broaden your horizons" },
            { chinese: "çœ‹å¾—æ›´æ¸…æ¥šäº›", english: "See more clearly" },
            { chinese: "ç»“æœå¯èƒ½ä¼šä»¤äººéœ‡æƒŠ", english: "The result might be shocking" },
            { chinese: "èŠ‚çœä½ çš„ç²¾åŠ›å§", english: "Save your energy" },
            { chinese: "ç®¡å®ƒå‘¢", english: "Whatever" },
            { chinese: "æ— è®ºä½ åšä»€ä¹ˆï¼Œç»“æœä¾æ—§", english: "No matter what you do, the result remains" },
            { chinese: "é‚£å°†å¼•èµ·ä¸€äº›çº·äº‰", english: "That will cause some disputes" },
            { chinese: "ç›¸å…³é—®é¢˜å¯èƒ½ä¼šæµ®å‡ºæ°´é¢", english: "Related issues may surface" },
            { chinese: "éµå¾ªå…¶ä»–äººçš„å»ºè®®", english: "Follow others' advice" },
            { chinese: "æ”¹å˜å°†ä¸ä¼šå¾ˆå¿«å‘ç”Ÿ", english: "Change won't happen quickly" },
            { chinese: "å€¼å¾—ä»˜å‡ºåŠªåŠ›", english: "Worth the effort" },
            { chinese: "è´Ÿèµ·è´£ä»»æ¥", english: "Take responsibility" },
            { chinese: "ä¸å€¼å¾—ä¸€äº‰", english: "Not worth fighting for" },
            { chinese: "é—®é—®ä½ çš„çˆ¶äº²å§", english: "Ask your father" },
            { chinese: "å‘åˆ«äººå€¾è¯‰", english: "Confide in others" },
            { chinese: "çœ‹èµ·æ¥è¿˜è¡Œ", english: "Looks okay" },
            { chinese: "ç»ä¸", english: "Never" },
            { chinese: "ç­‰å¾…ä¸€ä¸ªæ›´å¥½çš„æè®®", english: "Wait for a better proposal" },
            { chinese: "ä½ å¯èƒ½ä¼šé­é‡åå¯¹", english: "You might face opposition" },
            { chinese: "å‘Šè¯‰æŸäººé‚£å¯¹ä½ æ„å‘³ç€ä»€ä¹ˆ", english: "Tell someone what it means to you" },
            { chinese: "ä¸€åˆ‡éƒ½å–å†³äºä½ çš„é€‰æ‹©", english: "Everything depends on your choice" },
            { chinese: "æŠŠè¿™çœ‹ä½œä¸€ä¸ªæ—¶æœº", english: "See this as an opportunity" },
            { chinese: "ä¸è¦é™·å…¥ä½ çš„æƒ…ç»ª", english: "Don't get caught up in your emotions" },
            { chinese: "ä½ ä¸€å®šå¾—è¿™ä¹ˆåš", english: "You must do this" },
            { chinese: "äº«å—è¿™ä¸ªè¿‡ç¨‹", english: "Enjoy the process" },
            { chinese: "ä¸è¯†åºå±±çœŸé¢ç›®ï¼Œåªç¼˜èº«åœ¨æ­¤å±±ä¸­", english: "You can't see the true face of Mount Lu because you're in it" },
            { chinese: "ä½ ä¸ä¼šå¤±æœ›çš„", english: "You won't be disappointed" },
            { chinese: "æ˜¯æ—¶å€™èµ°äº†", english: "Time to go" },
            { chinese: "æ¬£ç„¶æ¥å—", english: "Accept gladly" },
            { chinese: "éµå¾ªå…¶ä»–äººçš„æ„è§", english: "Follow others' opinions" },
            { chinese: "è¯´å‡ºæ¥å§", english: "Speak up" },
            { chinese: "æ…·æ…¨å¤§åº¦ä¸€äº›", english: "Be more generous" },
            { chinese: "ä½ å¯èƒ½é­é‡åå¯¹", english: "You might face opposition" },
            { chinese: "ä½ èƒ½å¦ä¸è¦æŠ—æ‹’", english: "Can you not resist" },
            { chinese: "è¦éšœç¢éœ€è¦å…‹æœ", english: "Obstacles need to be overcome" },
            { chinese: "åšå‡ºæ”¹å˜", english: "Make changes" },
            { chinese: "æ— æ³•ä¿è¯", english: "No guarantee" },
            { chinese: "ç®—äº†å§", english: "Forget it" },
            { chinese: "åˆä½œæ˜¯å…³é”®", english: "Cooperation is key" }
        ];

        // å¼ºåˆ¶è§†é¢‘åŠ è½½å‡½æ•°
        function forceVideoLoad() {
            const video = document.querySelector('.video-bg');
            let attempts = 0;
            
            function keepTrying() {
                attempts++;
                console.log(`å°è¯•åŠ è½½è§†é¢‘ï¼Œç¬¬${attempts}æ¬¡`);
                
                video.load(); // å¼ºåˆ¶é‡æ–°åŠ è½½
                
                video.addEventListener('error', function() {
                    // é€’å¢å»¶è¿Ÿé‡è¯•
                    const delay = Math.min(attempts * 1000, 10000); // æœ€é•¿ç­‰å¾…10ç§’
                    setTimeout(keepTrying, delay);
                }, { once: true });
                
                video.addEventListener('canplaythrough', function() {
                    console.log('è§†é¢‘åŠ è½½æˆåŠŸ');
                }, { once: true });
            }
            
            keepTrying();
        }

        // å¼ºåˆ¶è®¸æ„¿é¡µè§†é¢‘åŠ è½½å‡½æ•°
        function forceWishVideoLoad() {
            const video = document.querySelector('.wish-bg-video');
            let attempts = 0;
            
            function keepTrying() {
                attempts++;
                console.log(`å°è¯•åŠ è½½è®¸æ„¿é¡µè§†é¢‘ï¼Œç¬¬${attempts}æ¬¡`);
                
                video.load(); // å¼ºåˆ¶é‡æ–°åŠ è½½
                
                video.addEventListener('error', function() {
                    // é€’å¢å»¶è¿Ÿé‡è¯•
                    const delay = Math.min(attempts * 1000, 10000); // æœ€é•¿ç­‰å¾…10ç§’
                    setTimeout(keepTrying, delay);
                }, { once: true });
                
                video.addEventListener('canplaythrough', function() {
                    console.log('è®¸æ„¿é¡µè§†é¢‘åŠ è½½æˆåŠŸ');
                }, { once: true });
            }
            
            keepTrying();
        }

        // é¡µé¢åˆ‡æ¢å‡½æ•°
        function goToWishPage() {
            console.log('goToWishPage å‡½æ•°è¢«è°ƒç”¨');
            try {
                // åœ¨é¡µé¢åˆ‡æ¢æ—¶æ’­æ”¾éŸ³ä¹
                const music = document.getElementById('backgroundMusic');
                if (music && music.paused) {
                    music.play().catch(e => console.log('éŸ³ä¹æ’­æ”¾å¤±è´¥:', e));
                }
                
                // éšè—è§†é¢‘é¡µé¢
                const videoPage = document.getElementById('videoPage');
                const wishPage = document.getElementById('wishPage');
                
                if (videoPage) videoPage.classList.remove('active');
                if (wishPage) wishPage.classList.add('active');
                
                console.log('é¡µé¢åˆ‡æ¢å®Œæˆ');
                
                // æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
                const loading = document.getElementById('loading');
                const wishText = document.getElementById('wishText');
                
                if (loading) loading.style.display = 'flex';
                if (wishText) wishText.style.display = 'none';
                
                // åŠ è½½æ•°æ®å¹¶å¼€å§‹åŠ¨ç”»
                loadAnswersAndStartAnimation();
                
                // åˆ›å»ºç²’å­èƒŒæ™¯
                createParticles();
            } catch (error) {
                console.error('é¡µé¢åˆ‡æ¢é”™è¯¯:', error);
            }
        }

        function goToVideoPage() {
            document.getElementById('wishPage').classList.remove('active');
            document.getElementById('videoPage').classList.add('active');
        }

        // AIèŠå¤©åŠŸèƒ½
        function toggleChat() {
            const chatContainer = document.getElementById('chatContainer');
            const chatToggleBtn = document.getElementById('chatToggleBtn');
            
            isChatOpen = !isChatOpen;
            
            if (isChatOpen) {
                chatContainer.classList.add('open');
                chatToggleBtn.style.display = 'none';
                // èšç„¦åˆ°è¾“å…¥æ¡†
                setTimeout(() => {
                    document.getElementById('chatInput').focus();
                }, 300);
            } else {
                chatContainer.classList.remove('open');
                chatToggleBtn.style.display = 'flex';
            }
        }

        function sendMessage() {
            const chatInput = document.getElementById('chatInput');
            const chatMessages = document.getElementById('chatMessages');
            const chatSendBtn = document.getElementById('chatSendBtn');
            const message = chatInput.value.trim();
            
            if (!message) return;
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯é‡å¤æ¶ˆæ¯
            if (message === lastMessage) {
                console.log('æ£€æµ‹åˆ°é‡å¤æ¶ˆæ¯ï¼Œæ·»åŠ å˜åŒ–');
                // ä¸ºé‡å¤æ¶ˆæ¯æ·»åŠ å¾®å°å˜åŒ–ï¼Œé¿å…APIè¿‡æ»¤
                const modifiedMessage = message + 'ï¼ˆé‡å¤ï¼‰';
                chatInput.value = modifiedMessage;
            }
            
            lastMessage = message;
            requestCount++;
            
            // ç¦ç”¨å‘é€æŒ‰é’®
            chatSendBtn.disabled = true;
            
            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
            addMessage(message, 'user');
            chatInput.value = '';
            
            // æ·»åŠ åˆ°èŠå¤©å†å²
            chatHistory.push({ role: 'user', content: message });
            
            // æ˜¾ç¤ºæ‰“å­—æŒ‡ç¤ºå™¨
            showTypingIndicator();
            
            // å‘é€åˆ°AIå¹¶è·å–å“åº”
            getAIResponse(message);
        }

        function addMessage(content, sender) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            messageDiv.textContent = content;
            chatMessages.appendChild(messageDiv);
            
            // æ»šåŠ¨åˆ°åº•éƒ¨
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // å¦‚æœæ˜¯AIæ¶ˆæ¯ï¼Œè‡ªåŠ¨æ’­æ”¾è¯­éŸ³
            if (sender === 'ai' && speechSynthesis) {
                // å»¶è¿Ÿä¸€ç‚¹æ’­æ”¾ï¼Œè®©ç”¨æˆ·çœ‹åˆ°æ¶ˆæ¯
                setTimeout(() => {
                    speakText(content);
                }, 500);
            }
        }

        function showTypingIndicator() {
            const chatMessages = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'typing-indicator';
            typingDiv.id = 'typingIndicator';
            
            for (let i = 0; i < 3; i++) {
                const dot = document.createElement('div');
                dot.className = 'typing-dot';
                typingDiv.appendChild(dot);
            }
            
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        async function getAIResponse(userMessage, retryCount = 0) {
            try {
                let aiResponse;
                
                if (COZE_CONFIG.enabled && COZE_CONFIG.botId && COZE_CONFIG.apiKey) {
                    // ä½¿ç”¨Coze BOT API
                    updateConnectionStatus('connecting');
                    aiResponse = await callCozeAPI(userMessage);
                    
                    // æ£€æŸ¥å“åº”æ˜¯å¦æœ‰æ•ˆ
                    if (!aiResponse || aiResponse.trim() === '' || aiResponse.includes('æŠ±æ­‰ï¼Œæˆ‘ç°åœ¨æ— æ³•ç†è§£')) {
                        // å¦‚æœå“åº”æ— æ•ˆä¸”é‡è¯•æ¬¡æ•°å°‘äº1æ¬¡ï¼Œé‡è¯•ä¸€æ¬¡
                        if (retryCount < 1) {
                            console.log('APIå“åº”æ— æ•ˆï¼Œé‡è¯•ä¸­...');
                            updateConnectionStatus('connecting');
                            await new Promise(resolve => setTimeout(resolve, 1000)); // ç­‰å¾…1ç§’
                            return getAIResponse(userMessage, retryCount + 1);
                        } else {
                            console.log('é‡è¯•å¤±è´¥ï¼Œä½¿ç”¨æœˆæœˆä¼‘æ¯æ¶ˆæ¯');
                            aiResponse = 'æœˆæœˆåˆšåˆšä¼‘æ¯å•¦~ï¼Œå¯ä»¥å†è¯´ä¸€éå—';
                        }
                    }
                    
                    updateConnectionStatus('online');
                } else {
                    // ä½¿ç”¨æ¨¡æ‹Ÿå“åº”
                    aiResponse = getMockAIResponse(userMessage);
                    // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ
                    await new Promise(resolve => setTimeout(resolve, 1000 + Math.random() * 2000));
                }
                
                // ç§»é™¤æ‰“å­—æŒ‡ç¤ºå™¨
                hideTypingIndicator();
                
                // æ·»åŠ AIå“åº”
                addMessage(aiResponse, 'ai');
                
                // æ·»åŠ åˆ°èŠå¤©å†å²
                chatHistory.push({ role: 'assistant', content: aiResponse });
                
            } catch (error) {
                console.error('AIå“åº”é”™è¯¯:', error);
                updateConnectionStatus('offline');
                hideTypingIndicator();
                
                // å¦‚æœé‡è¯•æ¬¡æ•°å°‘äº1æ¬¡ï¼Œå°è¯•é‡è¯•
                if (retryCount < 1) {
                    console.log('APIè°ƒç”¨å¤±è´¥ï¼Œé‡è¯•ä¸­...');
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    return getAIResponse(userMessage, retryCount + 1);
                } else {
                    addMessage('æœˆæœˆåˆšåˆšä¼‘æ¯å•¦~ï¼Œå¯ä»¥å†è¯´ä¸€éå—', 'ai');
                }
            } finally {
                // é‡æ–°å¯ç”¨å‘é€æŒ‰é’®
                document.getElementById('chatSendBtn').disabled = false;
            }
        }

        // æ›´æ–°è¿æ¥çŠ¶æ€
        function updateConnectionStatus(status) {
            const statusDot = document.getElementById('statusDot');
            const statusText = document.getElementById('statusText');
            
            if (!statusDot || !statusText) return;
            
            switch (status) {
                case 'online':
                    statusDot.className = 'status-dot';
                    statusText.textContent = 'åœ¨çº¿';
                    break;
                case 'offline':
                    statusDot.className = 'status-dot offline';
                    statusText.textContent = 'ç¦»çº¿';
                    break;
                case 'connecting':
                    statusDot.className = 'status-dot';
                    statusText.textContent = 'è¿æ¥ä¸­...';
                    break;
            }
        }

        // æµ‹è¯•Cozeè¿æ¥
        async function testCozeConnection() {
            updateConnectionStatus('connecting');
            
            try {
                // å‘é€ä¸€ä¸ªç®€å•çš„æµ‹è¯•æ¶ˆæ¯
                const testMessage = 'æµ‹è¯•è¿æ¥';
                console.log('å¼€å§‹æµ‹è¯•Coze APIè¿æ¥...');
                
                const response = await fetch(COZE_CONFIG.baseUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${COZE_CONFIG.apiKey}`
                    },
                    body: JSON.stringify({
                        bot_id: COZE_CONFIG.botId,
                        user: 'test_user',
                        query: testMessage,
                        stream: false
                    })
                });
                
                console.log('è¿æ¥æµ‹è¯•å“åº”çŠ¶æ€:', response.status);
                
                if (response.ok) {
                    updateConnectionStatus('online');
                    console.log('Coze APIè¿æ¥æµ‹è¯•æˆåŠŸ');
                } else {
                    const errorText = await response.text();
                    console.error('è¿æ¥æµ‹è¯•å¤±è´¥:', response.status, errorText);
                    updateConnectionStatus('offline');
                }
                
            } catch (error) {
                console.error('è¿æ¥æµ‹è¯•é”™è¯¯:', error);
                updateConnectionStatus('offline');
            }
        }

        // æ‰‹åŠ¨æµ‹è¯•Coze APIè¿æ¥
        async function testCozeAPI() {
            const statusText = document.getElementById('statusText');
            if (statusText) {
                statusText.textContent = 'æµ‹è¯•ä¸­...';
            }
            
            try {
                console.log('æ‰‹åŠ¨æµ‹è¯•Coze APIè¿æ¥...');
                
                const response = await fetch(COZE_CONFIG.baseUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${COZE_CONFIG.apiKey}`
                    },
                    body: JSON.stringify({
                        bot_id: COZE_CONFIG.botId,
                        user: 'manual_test',
                        query: 'ä½ å¥½',
                        stream: false
                    })
                });
                
                const responseText = await response.text();
                console.log('APIæµ‹è¯•å“åº”çŠ¶æ€:', response.status);
                console.log('APIæµ‹è¯•å“åº”å†…å®¹:', responseText);
                
                if (response.ok) {
                    // å°è¯•è§£æå“åº”å†…å®¹
                    let responseContent = '';
                    try {
                        const data = JSON.parse(responseText);
                        
                        // ä¼˜å…ˆå¤„ç†messagesæ ¼å¼
                        if (data.messages && Array.isArray(data.messages) && data.messages.length > 0) {
                            for (let i = data.messages.length - 1; i >= 0; i--) {
                                const message = data.messages[i];
                                if (message.type === 'answer' && message.content && message.content.trim() !== '') {
                                    responseContent = message.content;
                                    break;
                                }
                            }
                            if (!responseContent) {
                                responseContent = 'APIè¿æ¥æˆåŠŸï¼Œä½†æœªæ‰¾åˆ°æœ‰æ•ˆå›å¤å†…å®¹';
                            }
                        } 
                        // å¤„ç†æµå¼å“åº”æ ¼å¼
                        else if (data.msg_type === 'generate_answer_finish' && data.data) {
                            const dataObj = JSON.parse(data.data);
                            if (dataObj.FinData && dataObj.FinData.trim() !== '') {
                                responseContent = dataObj.FinData;
                            } else {
                                responseContent = 'APIè¿æ¥æˆåŠŸï¼Œä½†BOTå“åº”ä¸ºç©ºã€‚å°†ä½¿ç”¨æ™ºèƒ½æ¨¡æ‹Ÿå“åº”ã€‚';
                            }
                        } else {
                            responseContent = responseText.substring(0, 200);
                        }
                    } catch (e) {
                        responseContent = responseText.substring(0, 200);
                    }
                    
                    alert('âœ… Coze APIè¿æ¥æˆåŠŸï¼\nå“åº”çŠ¶æ€: ' + response.status + '\nå“åº”å†…å®¹: ' + responseContent);
                    if (statusText) {
                        statusText.textContent = 'APIå¯ç”¨';
                    }
                } else {
                    alert('âŒ Coze APIè¿æ¥å¤±è´¥ï¼\nçŠ¶æ€ç : ' + response.status + '\né”™è¯¯ä¿¡æ¯: ' + responseText);
                    if (statusText) {
                        statusText.textContent = 'APIé”™è¯¯';
                    }
                }
                
            } catch (error) {
                console.error('APIæµ‹è¯•é”™è¯¯:', error);
                alert('âŒ Coze APIæµ‹è¯•å‡ºé”™ï¼\né”™è¯¯: ' + error.message);
                if (statusText) {
                    statusText.textContent = 'è¿æ¥é”™è¯¯';
                }
            }
        }

        // Coze APIè°ƒç”¨å‡½æ•°
        async function callCozeAPI(message) {
            try {
                console.log('å‘é€æ¶ˆæ¯åˆ°Coze API:', message);
                console.log('è¯·æ±‚è®¡æ•°:', requestCount);
                console.log('ä½¿ç”¨é…ç½®:', {
                    baseUrl: COZE_CONFIG.baseUrl,
                    botId: COZE_CONFIG.botId,
                    apiKey: COZE_CONFIG.apiKey.substring(0, 20) + '...'
                });
                
                // æ·»åŠ è¯·æ±‚å»¶è¿Ÿï¼Œé¿å…è¿‡äºé¢‘ç¹çš„è¯·æ±‚
                if (requestCount > 1) {
                    const delay = Math.min(1000 + (requestCount * 200), 3000);
                    console.log('æ·»åŠ è¯·æ±‚å»¶è¿Ÿ:', delay + 'ms');
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
                
                // æ„å»ºè¯·æ±‚ä½“ - ä½¿ç”¨Coze APIçš„æ ‡å‡†æ ¼å¼
                const requestBody = {
                    bot_id: COZE_CONFIG.botId,
                    user: 'user_' + Date.now() + '_' + requestCount,
                    query: message,
                    stream: false
                };
                
                // å¦‚æœæœ‰èŠå¤©å†å²ï¼Œæ·»åŠ è¿›å»ï¼ˆé™åˆ¶æ•°é‡é¿å…è¿‡é•¿ï¼‰
                if (chatHistory.length > 0) {
                    requestBody.chat_history = chatHistory.slice(-5); // å‡å°‘åˆ°5æ¡å†å²
                }
                
                console.log('è¯·æ±‚ä½“:', requestBody);
                
                const response = await fetch(COZE_CONFIG.baseUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${COZE_CONFIG.apiKey}`
                    },
                    body: JSON.stringify(requestBody)
                });
                
                console.log('APIå“åº”çŠ¶æ€:', response.status);
                console.log('å“åº”å¤´:', Object.fromEntries(response.headers.entries()));
                
                // å…ˆå°è¯•è¯»å–å“åº”æ–‡æœ¬ï¼Œæ— è®ºçŠ¶æ€ç å¦‚ä½•
                const responseText = await response.text();
                console.log('åŸå§‹å“åº”æ–‡æœ¬:', responseText);
                
                if (!response.ok) {
                    let errorData;
                    try {
                        errorData = JSON.parse(responseText);
                    } catch (e) {
                        errorData = { message: responseText };
                    }
                    console.error('APIé”™è¯¯è¯¦æƒ…:', errorData);
                    throw new Error(`APIè¯·æ±‚å¤±è´¥: ${response.status} - ${errorData.message || errorData.error || 'æœªçŸ¥é”™è¯¯'}`);
                }
                
                let data;
                try {
                    data = JSON.parse(responseText);
                } catch (e) {
                    console.error('å“åº”è§£æå¤±è´¥:', e);
                    throw new Error('APIå“åº”æ ¼å¼é”™è¯¯');
                }
                
                console.log('è§£æåçš„å“åº”æ•°æ®:', data);
                
                // å¤„ç†Coze APIçš„å“åº”æ ¼å¼ - å¤šç§å¯èƒ½çš„å“åº”ç»“æ„
                // ä¼˜å…ˆå¤„ç†messagesæ ¼å¼ï¼ˆæ ‡å‡†å“åº”ï¼‰
                if (data.messages && Array.isArray(data.messages) && data.messages.length > 0) {
                    console.log('æ£€æµ‹åˆ°messagesæ ¼å¼å“åº”:', data.messages);
                    
                    // æŸ¥æ‰¾æœ€åä¸€ä¸ªanswerç±»å‹çš„æ¶ˆæ¯
                    for (let i = data.messages.length - 1; i >= 0; i--) {
                        const message = data.messages[i];
                        if (message.type === 'answer' && message.content && message.content.trim() !== '') {
                            console.log('æ‰¾åˆ°æœ‰æ•ˆå›å¤:', message.content);
                            return message.content;
                        }
                    }
                    
                    // å¦‚æœæ²¡æœ‰æ‰¾åˆ°answerç±»å‹ï¼Œå°è¯•ä»»ä½•æœ‰contentçš„æ¶ˆæ¯
                    for (let i = data.messages.length - 1; i >= 0; i--) {
                        const message = data.messages[i];
                        if (message.content && message.content.trim() !== '') {
                            console.log('æ‰¾åˆ°æœ‰æ•ˆå†…å®¹:', message.content);
                            return message.content;
                        }
                    }
                }
                
                // å¤„ç†æµå¼å“åº”æ ¼å¼ (ä½ é‡åˆ°çš„æ ¼å¼)
                if (data.msg_type === 'generate_answer_finish') {
                    try {
                        const dataObj = JSON.parse(data.data);
                        if (dataObj.FinData && dataObj.FinData.trim() !== '') {
                            return dataObj.FinData;
                        } else {
                            // å¦‚æœFinDataä¸ºç©ºï¼Œä½¿ç”¨æœˆæœˆä¼‘æ¯æ¶ˆæ¯
                            console.log('FinDataä¸ºç©ºï¼Œfinish_reason:', dataObj.finish_reason);
                            console.log('æœˆæœˆåˆšåˆšä¼‘æ¯å•¦ï¼Œè¿”å›ä¼‘æ¯æ¶ˆæ¯');
                            return 'æœˆæœˆåˆšåˆšä¼‘æ¯å•¦~ï¼Œå¯ä»¥å†è¯´ä¸€éå—';
                        }
                    } catch (e) {
                        console.log('è§£æFinDataå¤±è´¥:', e);
                        // è§£æå¤±è´¥æ—¶ä¹Ÿä½¿ç”¨æ¨¡æ‹Ÿå“åº”
                        return getMockAIResponse(message);
                    }
                }
                
                // å¤„ç†å…¶ä»–æµå¼å“åº”æ ¼å¼
                if (data.msg_type === 'generate_answer' && data.data) {
                    try {
                        const dataObj = JSON.parse(data.data);
                        if (dataObj.content) {
                            return dataObj.content;
                        }
                        if (dataObj.answer) {
                            return dataObj.answer;
                        }
                    } catch (e) {
                        console.log('è§£ææµå¼æ•°æ®å¤±è´¥:', e);
                    }
                }
                
                // å°è¯•å…¶ä»–å“åº”æ ¼å¼
                if (data.content) {
                    return data.content;
                }
                
                if (data.text) {
                    return data.text;
                }
                
                if (data.answer) {
                    return data.answer;
                }
                
                if (data.data && data.data.content) {
                    return data.data.content;
                }
                
                // å¦‚æœä»ç„¶æ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆå“åº”ï¼Œè¿”å›æœˆæœˆä¼‘æ¯æ¶ˆæ¯
                console.log('æœªæ‰¾åˆ°æœ‰æ•ˆå“åº”æ ¼å¼ï¼ŒåŸå§‹æ•°æ®:', data);
                return 'æœˆæœˆåˆšåˆšä¼‘æ¯å•¦~ï¼Œå¯ä»¥å†è¯´ä¸€éå—';
                
            } catch (error) {
                console.error('Coze APIè°ƒç”¨é”™è¯¯:', error);
                throw error;
            }
        }

        // æ¨¡æ‹ŸAIå“åº”å‡½æ•°ï¼ˆæœˆæœˆå°å…”å…”é£æ ¼ï¼‰
        function getMockAIResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            // æœˆæœˆå°å…”å…”çš„å¯çˆ±å›åº”
            const yueyueResponses = [
                "å“å‘€ï¼Œè¿™ä¸ªé—®é¢˜è®©å°å…”å…”æƒ³æƒ³å‘¢~ ğŸŒ¿",
                "å—¯å—¯ï¼Œæœˆæœˆæ˜ç™½å•¦ï¼è®©æˆ‘æ¥å¸®ä½ æƒ³æƒ³~ ğŸ°",
                "å˜»å˜»ï¼Œè¿™ä¸ªé—®é¢˜å¾ˆæœ‰è¶£å‘¢ï¼å°å…”å…”æ¥å›ç­”ä½ ~ âœ¨",
                "å“‡ï¼Œä½ é—®å¾—çœŸå¥½ï¼è®©æˆ‘æƒ³æƒ³æ€ä¹ˆå›ç­”ä½ ~ ğŸŒŸ",
                "å—¯å—¯ï¼ŒæœˆæœˆçŸ¥é“ç­”æ¡ˆå•¦ï¼å¬æˆ‘è¯´å“¦~ ğŸ’«",
                "å˜»å˜»ï¼Œè¿™ä¸ªé—®é¢˜è®©å°å…”å…”å¾ˆå¼€å¿ƒå‘¢ï¼è®©æˆ‘å‘Šè¯‰ä½ ~ ğŸŒ¸",
                "å“‡å¡ï¼Œä½ é—®å¾—çœŸæ£’ï¼æœˆæœˆæ¥å¸®ä½ è§£ç­”~ ğŸŒº",
                "å—¯å—¯ï¼Œå°å…”å…”æ˜ç™½ä½ çš„æ„æ€å•¦ï¼è®©æˆ‘æƒ³æƒ³~ ğŸŒ¼"
            ];
            
            // æ ¹æ®æ¶ˆæ¯å†…å®¹æä¾›æ›´ç›¸å…³çš„å“åº”
            if (lowerMessage.includes('ä½ å¥½') || lowerMessage.includes('hi') || lowerMessage.includes('hello')) {
                return "ä½ å¥½å‘€ï¼Œæˆ‘æ˜¯æœˆæœˆï¼å¦‚æœä½ æœ‰ä»€ä¹ˆä¸å¼€å¿ƒçš„äº‹ï¼Œè·Ÿæˆ‘è¯´è¯´å§ï¼Œæˆ‘ä¼šè®¤çœŸå¬ï¼Œä¸€ç›´é™ªç€ä½ å‘€ï½ğŸ°ğŸ’•";
            } else if (lowerMessage.includes('åœ¨å—') || lowerMessage.includes('åœ¨çº¿')) {
                return "åœ¨çš„åœ¨çš„ï¼æœˆæœˆä¸€ç›´éƒ½åœ¨è¿™é‡Œå‘¢~ æœ‰ä»€ä¹ˆéœ€è¦å°å…”å…”å¸®å¿™çš„å—ï¼ŸğŸ°ğŸ’•";
            } else if (lowerMessage.includes('éƒé—·') || lowerMessage.includes('ä¸å¼€å¿ƒ') || lowerMessage.includes('éš¾è¿‡')) {
                return "å“å‘€ï¼Œä¸è¦éƒé—·å•¦~ æ¥ï¼Œç»™ä½ ä¸€ç‰‡æœ€å«©çš„è‰è‰ï¼Œæˆ‘ä»¬ä¸€èµ·æ•°æ˜Ÿæ˜Ÿå¥½ä¸å¥½ï¼Ÿå°å…”å…”é™ªç€ä½ å‘¢ï¼ğŸŒŸğŸŒ¿";
            } else if (lowerMessage.includes('å–œæ¬¢') || lowerMessage.includes('çˆ±')) {
                return "å½“ç„¶å–œæ¬¢å‘€ï¼åƒå–œæ¬¢æ™šéœä¸€æ ·æš–æš–çš„~ å°å…”å…”æœ€å–œæ¬¢å’Œå¤§å®¶ä¸€èµ·èŠå¤©å•¦ï¼ğŸŒ…ğŸ’–";
            } else if (lowerMessage.includes('ç´¯') || lowerMessage.includes('ç–²æƒ«')) {
                return "ç´¯ç´¯çš„è¯ï¼Œæ¥ç‰‡å«©å«©çš„è‰è‰å«å«æ‰‹æ‰‹å“’~ å°å…”å…”ç»™ä½ å‡†å¤‡äº†å¥½å¤šå¥½å¤šè‰è‰å‘¢ï¼ğŸŒ±ğŸ’š";
            } else if (lowerMessage.includes('è°¢è°¢') || lowerMessage.includes('æ„Ÿè°¢')) {
                return "ä¸ç”¨å®¢æ°”å•¦ï¼å°å…”å…”æœ€å–œæ¬¢å¸®åŠ©å¤§å®¶äº†~ è¿˜æœ‰ä»€ä¹ˆéœ€è¦æœˆæœˆçš„å—ï¼ŸğŸ°ğŸ’•";
            } else if (lowerMessage.includes('å†è§') || lowerMessage.includes('æ‹œæ‹œ')) {
                return "å†è§å•¦ï¼è®°å¾—æƒ³å°å…”å…”å“¦~ æœˆæœˆä¼šä¸€ç›´åœ¨è¿™é‡Œç­‰ä½ çš„ï¼ğŸŒŸğŸ’–";
            } else if (lowerMessage.includes('æ˜Ÿæ˜Ÿ') || lowerMessage.includes('å¤©ç©º')) {
                return "å“‡ï¼Œä½ ä¹Ÿå–œæ¬¢çœ‹æ˜Ÿæ˜Ÿå—ï¼Ÿå°å…”å…”æœ€å–œæ¬¢èººåœ¨è‰åŸä¸Šæ•°æ˜Ÿæ˜Ÿå•¦ï¼ä¸€é—ªä¸€é—ªäº®æ™¶æ™¶~ âœ¨ğŸŒŸ";
            } else if (lowerMessage.includes('è‰') || lowerMessage.includes('è‰åŸ')) {
                return "è‰åŸä¸Šçš„è‰è‰æœ€å«©æœ€é¦™å•¦ï¼å°å…”å…”æ¯å¤©éƒ½è¦åƒå¥½å¤šå¥½å¤šå‘¢~ ä½ è¦ä¸è¦ä¹Ÿå°å°ï¼ŸğŸŒ¿ğŸ°";
            } else if (lowerMessage.includes('ä½ æ˜¯è°') || lowerMessage.includes('ä»‹ç»') || lowerMessage.includes('å«ä»€ä¹ˆåå­—')) {
                return "æˆ‘å«æœˆæœˆå“’ï¼Œæ˜¯è‰åŸä¸Šçš„å°å…”å…”å•¦~ æœ€å–œæ¬¢å’Œå¤§å®¶èŠå¤©ï¼Œåˆ†äº«å¿«ä¹ï¼Œè¿˜æœ‰åƒå«©å«©çš„è‰è‰ï¼ğŸ°ğŸŒ¿âœ¨";
            } else if (lowerMessage.includes('taylor') || lowerMessage.includes('æ³°å‹’æ–¯å¨å¤«ç‰¹') || lowerMessage.includes('éœ‰éœ‰')) {
                return "å–œæ¬¢å‘€ï¼Œå¥¹çš„æ­Œæ­Œåƒé£é£ä¸€æ ·è½»è½»æŸ”æŸ”å“’ï¼Œå¬å¾—æˆ‘å¿ƒé‡Œæš–æš–çš„å‘œ~ æœ€å–œæ¬¢'Love Story'å•¦ï¼Œåƒæ™šéœä¸€æ ·æµªæ¼«å‘¢ï¼ğŸµâœ¨";
            } else if (lowerMessage.includes('æ¨è') || lowerMessage.includes('æ­Œæ›²') || lowerMessage.includes('æ­Œ')) {
                return "å¥½å‘€ï¼Œç»™ä½ æ¨èå‡ é¦–æˆ‘æœ€å–œæ¬¢çš„Taylorçš„æ­Œæ­Œå•¦ï¼š'Love Story'åƒæ™šéœä¸€æ ·æµªæ¼«å“’ï¼Œ'You Belong With Me'åƒè‰åœ°ä¸€æ ·æ¸…æ–°å‘œï¼Œ'All Too Well'åƒé£é£ä¸€æ ·æ¸©æŸ”å˜›~ ğŸ¶ğŸŒ¿";
            } else if (lowerMessage.includes('æ•°å­¦') || lowerMessage.includes('è®¡ç®—') || lowerMessage.includes('+') || lowerMessage.includes('=')) {
                // ç®€å•çš„æ•°å­¦è®¡ç®—
                const mathMatch = message.match(/(\d+)\s*\+\s*(\d+)/);
                if (mathMatch) {
                    const num1 = parseInt(mathMatch[1]);
                    const num2 = parseInt(mathMatch[2]);
                    const result = num1 + num2;
                    return `${num1}+${num2}=${result}å‘€ï¼Œç»™ä½ ä¸€ç‰‡æœ€å«©çš„è‰è‰ï¼Œå«å«æ‰‹æ‰‹ï¼Œé™ªé™ªå¿ƒè·³è·³å˜›~ ğŸŒ¿ğŸ’•`;
                }
                return "æ•°å­¦é¢˜å‘€ï¼å°å…”å…”æ¥å¸®ä½ ç®—ç®—~ è™½ç„¶æœˆæœˆæ•°å­¦ä¸æ˜¯å¾ˆå¥½ï¼Œä½†æ˜¯å¾ˆæ„¿æ„é™ªä½ ä¸€èµ·æ€è€ƒå‘¢ï¼ğŸ§®ğŸ°";
            } else {
                // éšæœºæœˆæœˆé£æ ¼å“åº”
                const randomResponse = yueyueResponses[Math.floor(Math.random() * yueyueResponses.length)];
                const additionalResponses = [
                    "å°å…”å…”è§‰å¾—è¿™ä¸ªé—®é¢˜å¾ˆæœ‰æ„æ€å‘¢ï¼",
                    "æœˆæœˆæ¥å¸®ä½ æƒ³æƒ³ç­”æ¡ˆ~",
                    "å˜»å˜»ï¼Œè®©å°å…”å…”å‘Šè¯‰ä½ ~",
                    "å—¯å—¯ï¼ŒæœˆæœˆçŸ¥é“æ€ä¹ˆå›ç­”ä½ ï¼"
                ];
                const additional = additionalResponses[Math.floor(Math.random() * additionalResponses.length)];
                return randomResponse + " " + additional;
            }
        }

        // è¯­éŸ³åŠŸèƒ½ç›¸å…³å‡½æ•°
        function initializeVoiceFeatures() {
            // é¢„åŠ è½½è¯­éŸ³åˆ—è¡¨
            loadVoices();
            
            // æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒè¯­éŸ³è¯†åˆ«
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'zh-CN'; // è®¾ç½®ä¸ºä¸­æ–‡
                
                recognition.onstart = function() {
                    console.log('è¯­éŸ³è¯†åˆ«å¼€å§‹');
                    isRecording = true;
                    updateVoiceButton();
                };
                
                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    console.log('è¯­éŸ³è¯†åˆ«ç»“æœ:', transcript);
                    document.getElementById('chatInput').value = transcript;
                    isRecording = false;
                    updateVoiceButton();
                };
                
                recognition.onerror = function(event) {
                    console.error('è¯­éŸ³è¯†åˆ«é”™è¯¯:', event.error);
                    isRecording = false;
                    updateVoiceButton();
                    showVoiceStatus('è¯­éŸ³è¯†åˆ«å¤±è´¥: ' + event.error);
                };
                
                recognition.onend = function() {
                    console.log('è¯­éŸ³è¯†åˆ«ç»“æŸ');
                    isRecording = false;
                    updateVoiceButton();
                };
            } else {
                console.log('æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«');
                document.getElementById('chatVoiceBtn').style.display = 'none';
            }
        }

        function loadVoices() {
            // åŠ è½½è¯­éŸ³åˆ—è¡¨
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = function() {
                    console.log('è¯­éŸ³åˆ—è¡¨å·²åŠ è½½');
                };
            }
            
            // å¼ºåˆ¶åŠ è½½è¯­éŸ³åˆ—è¡¨
            const voices = speechSynthesis.getVoices();
            if (voices.length === 0) {
                // å¦‚æœè¯­éŸ³åˆ—è¡¨ä¸ºç©ºï¼Œå»¶è¿Ÿé‡è¯•
                setTimeout(loadVoices, 100);
            } else {
                console.log('æ‰¾åˆ°', voices.length, 'ä¸ªå¯ç”¨è¯­éŸ³');
                // æ˜¾ç¤ºä¸­æ–‡è¯­éŸ³ä¿¡æ¯
                const chineseVoices = voices.filter(v => v.lang.includes('zh') || v.lang.includes('CN'));
                console.log('ä¸­æ–‡è¯­éŸ³:', chineseVoices.map(v => ({ name: v.name, lang: v.lang })));
            }
        }

        function toggleVoiceRecording() {
            if (!recognition) {
                showVoiceStatus('æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«');
                return;
            }

            if (isRecording) {
                recognition.stop();
                isRecording = false;
            } else {
                recognition.start();
                isRecording = true;
            }
            updateVoiceButton();
        }

        function updateVoiceButton() {
            const voiceBtn = document.getElementById('chatVoiceBtn');
            if (isRecording) {
                voiceBtn.classList.add('recording');
                voiceBtn.innerHTML = 'ğŸ”´';
                voiceBtn.title = 'åœæ­¢å½•éŸ³';
            } else {
                voiceBtn.classList.remove('recording');
                voiceBtn.innerHTML = 'ğŸ¤';
                voiceBtn.title = 'è¯­éŸ³è¾“å…¥';
            }
        }

        function speakText(text) {
            if (!speechSynthesis) {
                console.log('æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆ');
                return;
            }

            // åœæ­¢å½“å‰æ’­æ”¾
            if (currentUtterance) {
                speechSynthesis.cancel();
            }

            // é¢„å¤„ç†æ–‡æœ¬ï¼Œè®©è¯­éŸ³æ›´å¯çˆ±
            const processedText = preprocessTextForSpeech(text);

            currentUtterance = new SpeechSynthesisUtterance(processedText);
            currentUtterance.lang = 'zh-CN'; // è®¾ç½®ä¸ºä¸­æ–‡
            
            // ä¼˜åŒ–è¯­éŸ³å‚æ•°ï¼Œè®©å£°éŸ³åƒ4-10å²å°å­©å­
            currentUtterance.rate = 1.0; // 1.0å€è¯­é€Ÿï¼Œæ­£å¸¸è¯­é€Ÿ
            currentUtterance.pitch = 1.8; // éŸ³è°ƒæ›´é«˜ï¼Œåƒå°å­©å­çš„å°–ç»†å£°éŸ³
            currentUtterance.volume = 0.9; // éŸ³é‡é€‚ä¸­ï¼Œåƒå°å­©å­çš„éŸ³é‡

            // è·å–æ‰€æœ‰å¯ç”¨è¯­éŸ³
            const voices = speechSynthesis.getVoices();
            console.log('å¯ç”¨è¯­éŸ³åˆ—è¡¨:', voices.map(v => ({ name: v.name, lang: v.lang, gender: v.name.toLowerCase().includes('female') || v.name.toLowerCase().includes('å¥³') })));
            
            // ä¼˜å…ˆé€‰æ‹©å¥³æ€§/å„¿ç«¥è¯­éŸ³ï¼ŒæŒ‰ä¼˜å…ˆçº§æ’åº
            let selectedVoice = null;
            
            // ç¬¬ä¸€ä¼˜å…ˆçº§ï¼šæ˜ç¡®æ ‡è®°ä¸ºå„¿ç«¥æˆ–å°å¥³å­©çš„è¯­éŸ³
            selectedVoice = voices.find(voice => 
                voice.lang.includes('zh') && (
                    voice.name.toLowerCase().includes('child') ||
                    voice.name.toLowerCase().includes('å„¿ç«¥') ||
                    voice.name.toLowerCase().includes('kid') ||
                    voice.name.toLowerCase().includes('girl') ||
                    voice.name.toLowerCase().includes('xiaoxiao') ||
                    voice.name.toLowerCase().includes('xiaoyun') ||
                    voice.name.toLowerCase().includes('xiaofeng') ||
                    voice.name.toLowerCase().includes('xiaoqian') ||
                    voice.name.toLowerCase().includes('meimei') ||
                    voice.name.toLowerCase().includes('yaya') ||
                    voice.name.toLowerCase().includes('tingting') ||
                    voice.name.toLowerCase().includes('lili') ||
                    voice.name.toLowerCase().includes('nana')
                )
            );
            
            // ç¬¬äºŒä¼˜å…ˆçº§ï¼šä»»ä½•ä¸­æ–‡å¥³æ€§è¯­éŸ³
            if (!selectedVoice) {
                selectedVoice = voices.find(voice => 
                    voice.lang.includes('zh') && 
                    (voice.name.toLowerCase().includes('female') || voice.name.toLowerCase().includes('å¥³'))
                );
            }
            
            // ç¬¬ä¸‰ä¼˜å…ˆçº§ï¼šä»»ä½•ä¸­æ–‡è¯­éŸ³
            if (!selectedVoice) {
                selectedVoice = voices.find(voice => 
                    voice.lang.includes('zh') || voice.lang.includes('CN')
                );
            }
            
            if (selectedVoice) {
                currentUtterance.voice = selectedVoice;
                console.log('é€‰æ‹©çš„è¯­éŸ³:', selectedVoice.name, selectedVoice.lang);
                
                // æ ¹æ®é€‰æ‹©çš„è¯­éŸ³è¿›ä¸€æ­¥è°ƒæ•´å‚æ•°ï¼Œè®©å£°éŸ³æ›´åƒ4-10å²å°å­©å­
                adjustVoiceForChild(selectedVoice, currentUtterance);
            }

            currentUtterance.onstart = function() {
                console.log('å¼€å§‹æ’­æ”¾è¯­éŸ³:', selectedVoice ? selectedVoice.name : 'é»˜è®¤è¯­éŸ³');
                console.log('æ’­æ”¾å†…å®¹:', processedText);
            };

            currentUtterance.onend = function() {
                console.log('è¯­éŸ³æ’­æ”¾ç»“æŸ');
                currentUtterance = null;
            };

            currentUtterance.onerror = function(event) {
                console.error('è¯­éŸ³æ’­æ”¾é”™è¯¯:', event.error);
                currentUtterance = null;
            };

            speechSynthesis.speak(currentUtterance);
        }

        function adjustVoiceForChild(selectedVoice, utterance) {
            const voiceName = selectedVoice.name.toLowerCase();
            
            // ä¸“é—¨çš„å°å­©å­è¯­éŸ³ï¼ˆå¦‚å°æ™“ã€å°äº‘ç­‰ï¼‰
            if (voiceName.includes('xiaoxiao') || 
                voiceName.includes('xiaoyun') ||
                voiceName.includes('xiaoqian') ||
                voiceName.includes('meimei') ||
                voiceName.includes('yaya') ||
                voiceName.includes('tingting') ||
                voiceName.includes('lili') ||
                voiceName.includes('nana')) {
                // æœ€åƒ4-10å²å°å­©å­çš„å‚æ•°ï¼Œæ­£å¸¸è¯­é€Ÿ
                utterance.rate = 1.0; // 1.0å€è¯­é€Ÿï¼Œæ­£å¸¸è¯­é€Ÿ
                utterance.pitch = 2.2; // å¾ˆé«˜ï¼Œåƒå°å­©å­çš„å°–ç»†å£°éŸ³
                utterance.volume = 0.8; // åƒå°å­©å­çš„éŸ³é‡
                console.log('ä½¿ç”¨ä¸“é—¨çš„å°å­©å­è¯­éŸ³å‚æ•°');
            }
            // å„¿ç«¥/å¥³å­©è¯­éŸ³
            else if (voiceName.includes('child') || 
                     voiceName.includes('å„¿ç«¥') ||
                     voiceName.includes('kid') ||
                     voiceName.includes('girl')) {
                utterance.rate = 1.0; // 1.0å€è¯­é€Ÿ
                utterance.pitch = 2.0;
                utterance.volume = 0.85;
                console.log('ä½¿ç”¨å„¿ç«¥è¯­éŸ³å‚æ•°');
            }
            // å¥³æ€§è¯­éŸ³è°ƒæ•´ä¸ºå°å­©å­
            else if (voiceName.includes('female') || voiceName.includes('å¥³')) {
                utterance.rate = 1.0; // 1.0å€è¯­é€Ÿ
                utterance.pitch = 1.9;
                utterance.volume = 0.9;
                console.log('ä½¿ç”¨å¥³æ€§è¯­éŸ³è°ƒæ•´ä¸ºå°å­©å­å‚æ•°');
            }
            // å…¶ä»–è¯­éŸ³ä¹Ÿå°½é‡è°ƒæ•´ä¸ºå°å­©å­å£°éŸ³
            else {
                utterance.rate = 1.0; // 1.0å€è¯­é€Ÿ
                utterance.pitch = 1.8;
                utterance.volume = 0.9;
                console.log('ä½¿ç”¨é€šç”¨å°å­©å­è¯­éŸ³å‚æ•°');
            }
        }

        function preprocessTextForSpeech(text) {
            // é¢„å¤„ç†æ–‡æœ¬ï¼Œè®©è¯­éŸ³æ›´åƒ4-10å²å°å­©å­è¯´è¯
            let processed = text;
            
            // æ›¿æ¢ä¸€äº›è¯æ±‡ï¼Œè®©å‘éŸ³æ›´å¯çˆ±
            processed = processed.replace(/~/g, 'ï½'); // ä½¿ç”¨å…¨è§’æ³¢æµªå·
            processed = processed.replace(/\./g, 'ã€‚'); // ä½¿ç”¨ä¸­æ–‡å¥å·
            processed = processed.replace(/!/g, 'ï¼'); // ä½¿ç”¨ä¸­æ–‡æ„Ÿå¹å·
            processed = processed.replace(/\?/g, 'ï¼Ÿ'); // ä½¿ç”¨ä¸­æ–‡é—®å·
            
            // åœ¨å¯çˆ±è¯æ±‡åæ·»åŠ åœé¡¿ï¼Œåƒå°å­©å­è¯´è¯
            processed = processed.replace(/(å°å…”å…”|æœˆæœˆ|è‰è‰|æ˜Ÿæ˜Ÿ|æ™šéœ)/g, '$1ï¼Œï¼Œ');
            
            // åœ¨è¯­æ°”è¯åæ·»åŠ åœé¡¿ï¼Œè®©è¯­éŸ³æ›´ç”ŸåŠ¨ï¼Œåƒå°å­©å­
            processed = processed.replace(/(å“’|å‘œ|å˜›|å‘€|å•¦|å‘¢|å“¦|å—¯)/g, '$1ï¼Œï¼Œ');
            
            // åœ¨å¥å­ä¸­é—´æ·»åŠ æ›´å¤šåœé¡¿ï¼Œåƒå°å­©å­è¯´è¯æ—¶çš„åœé¡¿
            processed = processed.replace(/(ï¼Œ|ã€‚|ï¼|ï¼Ÿ)/g, '$1 ');
            
            // åœ¨é‡å¤çš„è¯æ±‡é—´æ·»åŠ åœé¡¿ï¼Œåƒå°å­©å­è¯´è¯
            processed = processed.replace(/(è‰è‰|æ˜Ÿæ˜Ÿ|æ™šéœ)(è‰è‰|æ˜Ÿæ˜Ÿ|æ™šéœ)/g, '$1ï¼Œï¼Œ$2');
            
            // åœ¨æ•°å­—åæ·»åŠ åœé¡¿ï¼Œåƒå°å­©å­æ•°æ•°
            processed = processed.replace(/(\d+)/g, '$1ï¼Œï¼Œ');
            
            return processed;
        }

        function showVoiceStatus(message) {
            // åˆ›å»ºçŠ¶æ€æç¤º
            const status = document.createElement('div');
            status.className = 'voice-status';
            status.textContent = message;
            
            const voiceBtn = document.getElementById('chatVoiceBtn');
            voiceBtn.style.position = 'relative';
            voiceBtn.appendChild(status);
            
            // 3ç§’åç§»é™¤æç¤º
            setTimeout(() => {
                if (status.parentNode) {
                    status.parentNode.removeChild(status);
                }
            }, 3000);
        }

        // åŠ è½½æ•°æ®
        function loadAnswersAndStartAnimation() {
            try {
                // ç›´æ¥ä½¿ç”¨å¤–éƒ¨æ•°æ®
                allAnswers = wishAnswers;
                console.log('åŠ è½½äº†', allAnswers.length, 'ä¸ªç­”æ¡ˆ');
                
                // éšè—åŠ è½½åŠ¨ç”»ï¼Œæ˜¾ç¤ºæ–‡å­—
                document.getElementById('loading').style.display = 'none';
                document.getElementById('wishText').style.display = 'block';
                
                // å¼€å§‹è®¸æ„¿åŠ¨ç”»
                startWishAnimation();
            } catch (error) {
                console.error('åŠ è½½æ•°æ®å¤±è´¥:', error);
                // å¦‚æœåŠ è½½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤ç­”æ¡ˆ
                allAnswers = [
                    "æ„¿ä½ çš„æ¯ä¸€å¤©éƒ½å……æ»¡é˜³å…‰å’Œå¸Œæœ›",
                    "æ„¿æ‰€æœ‰çš„ç¾å¥½éƒ½å¦‚æœŸè€Œè‡³",
                    "æ„¿ä½ çš„æ¢¦æƒ³éƒ½èƒ½å®ç°"
                ];
                
                document.getElementById('loading').style.display = 'none';
                document.getElementById('wishText').style.display = 'block';
                startWishAnimation();
            }
        }

        // è®¸æ„¿æ–‡å­—åŠ¨ç”»
        function startWishAnimation() {
            const wishTextElement = document.getElementById('wishText');
            wishTextElement.innerHTML = '';
            
            // éšæœºé€‰æ‹©ä¸€ä¸ªç­”æ¡ˆ
            const selectedAnswer = allAnswers[Math.floor(Math.random() * allAnswers.length)];
            currentAnswer = selectedAnswer;
            
            // åˆ›å»ºä¸­æ–‡æ–‡æœ¬
            const chineseText = document.createElement('div');
            chineseText.className = 'chinese-text';
            
            // å°†ä¸­æ–‡å¥å­æ‹†åˆ†æˆå­—ç¬¦
            const chineseChars = selectedAnswer.chinese.split('');
            chineseChars.forEach((char, index) => {
                const charElement = document.createElement('span');
                charElement.textContent = char === ' ' ? '\u00A0' : char;
                charElement.className = 'char';
                
                // è®¾ç½®å»¶è¿Ÿæ—¶é—´
                const delay = index * 0.1;
                charElement.style.animationDelay = delay + 's';
                
                // æ·»åŠ å‘å…‰æ•ˆæœ
                if (Math.random() > 0.6) {
                    charElement.classList.add('glow');
                }
                
                chineseText.appendChild(charElement);
            });
            
            // åˆ›å»ºè‹±æ–‡æ–‡æœ¬
            const englishText = document.createElement('div');
            englishText.className = 'english-text';
            
            // å°†è‹±æ–‡å¥å­æ‹†åˆ†æˆå­—ç¬¦
            const englishChars = selectedAnswer.english.split('');
            englishChars.forEach((char, index) => {
                const charElement = document.createElement('span');
                charElement.textContent = char === ' ' ? '\u00A0' : char;
                charElement.className = 'char';
                
                // è®¾ç½®å»¶è¿Ÿæ—¶é—´ï¼ˆæ¯”ä¸­æ–‡ç¨æ™šä¸€ç‚¹ï¼‰
                const delay = (chineseChars.length * 0.1) + (index * 0.05);
                charElement.style.animationDelay = delay + 's';
                
                englishText.appendChild(charElement);
            });
            
            wishTextElement.appendChild(chineseText);
            wishTextElement.appendChild(englishText);
        }

        // åˆ›å»ºç²’å­èƒŒæ™¯
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            particlesContainer.innerHTML = '';
            
            for (let i = 0; i < 25; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                // éšæœºä½ç½®
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                
                // éšæœºåŠ¨ç”»å»¶è¿Ÿå’ŒæŒç»­æ—¶é—´
                particle.style.animationDelay = Math.random() * 8 + 's';
                particle.style.animationDuration = (Math.random() * 4 + 6) + 's';
                
                // éšæœºå¤§å°
                const size = Math.random() * 3 + 2;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                
                particlesContainer.appendChild(particle);
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // ç¡®ä¿è§†é¢‘åœ¨ç§»åŠ¨ç«¯èƒ½æ­£å¸¸æ’­æ”¾
            const video = document.querySelector('.video-bg');
            video.addEventListener('loadeddata', function() {
                video.play().catch(e => {
                    console.log('è§†é¢‘è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢:', e);
                });
            });
            
            // æ·»åŠ æŒ‰é’®ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨ï¼ˆåªä½¿ç”¨ä¸€ä¸ªäº‹ä»¶ï¼‰
            const wishButton = document.getElementById('wishBtn');
            if (wishButton) {
                console.log('æ‰¾åˆ°æŒ‰é’®å…ƒç´ ');
                
                // æ£€æµ‹æ˜¯å¦ä¸ºç§»åŠ¨è®¾å¤‡
                const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                
                if (isMobile) {
                    // ç§»åŠ¨ç«¯åªä½¿ç”¨touchendäº‹ä»¶
                    wishButton.addEventListener('touchend', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log('ç§»åŠ¨ç«¯æŒ‰é’®è¢«è§¦æ‘¸');
                        goToWishPage();
                    }, { passive: false });
                } else {
                    // æ¡Œé¢ç«¯åªä½¿ç”¨clickäº‹ä»¶
                    wishButton.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log('æ¡Œé¢ç«¯æŒ‰é’®è¢«ç‚¹å‡»');
                        goToWishPage();
                    });
                }
            } else {
                console.error('æ‰¾ä¸åˆ°æŒ‰é’®å…ƒç´ ');
            }

            // éŸ³ä¹æ’­æ”¾å‡½æ•°
            function playBackgroundMusic() {
                const music = document.getElementById('backgroundMusic');
                if (music) {
                    music.volume = 0.15; // é™ä½éŸ³é‡åˆ°0.15ï¼Œæ›´è½»æŸ”
                    music.muted = false; // ç›´æ¥è®¾ç½®ä¸ºéé™éŸ³
                    
                    const playPromise = music.play();
                    if (playPromise !== undefined) {
                        playPromise.then(() => {
                            console.log('éŸ³ä¹æ’­æ”¾æˆåŠŸ');
                        }).catch(error => {
                            console.log('è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢ï¼Œéœ€è¦ç”¨æˆ·äº¤äº’:', error);
                        });
                    }
                }
            }

            // å°è¯•æ’­æ”¾éŸ³ä¹
            playBackgroundMusic();
            
            // åœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡äº¤äº’æ—¶æ’­æ”¾éŸ³ä¹
            document.body.addEventListener('click', function() {
                playBackgroundMusic();
            }, { once: true });
            
            // åœ¨ç”¨æˆ·è§¦æ‘¸æ—¶æ’­æ”¾éŸ³ä¹ï¼ˆç§»åŠ¨ç«¯ï¼‰
            document.body.addEventListener('touchstart', function() {
                playBackgroundMusic();
            }, { once: true });

            // å¼ºåˆ¶åŠ è½½è§†é¢‘
            forceVideoLoad();
            forceWishVideoLoad();
            
            // åˆå§‹åŒ–èŠå¤©åŠŸèƒ½
            initializeChatFeatures();
            
            // åˆå§‹åŒ–è¿æ¥çŠ¶æ€
            if (COZE_CONFIG.enabled && COZE_CONFIG.botId && COZE_CONFIG.apiKey) {
                // æµ‹è¯•APIè¿æ¥
                testCozeConnection();
            } else {
                // ä½¿ç”¨æ™ºèƒ½æ¨¡æ‹Ÿæ¨¡å¼
                updateConnectionStatus('online');
                const statusText = document.getElementById('statusText');
                if (statusText) {
                    statusText.textContent = 'æ™ºèƒ½å“åº”';
                }
            }
        });

        // åˆå§‹åŒ–èŠå¤©åŠŸèƒ½
        function initializeChatFeatures() {
            const chatInput = document.getElementById('chatInput');
            const chatSendBtn = document.getElementById('chatSendBtn');
            
            if (chatInput) {
                // å›è½¦é”®å‘é€æ¶ˆæ¯
                chatInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        sendMessage();
                    }
                });
                
                // è¾“å…¥æ¡†å˜åŒ–æ—¶å¯ç”¨/ç¦ç”¨å‘é€æŒ‰é’®
                chatInput.addEventListener('input', function() {
                    chatSendBtn.disabled = !this.value.trim();
                });
            }
            
            // åˆå§‹åŒ–è¯­éŸ³åŠŸèƒ½
            initializeVoiceFeatures();
            
            // ç‚¹å‡»èŠå¤©åŒºåŸŸå¤–å…³é—­å¯¹è¯æ¡†
            document.addEventListener('click', function(e) {
                const chatContainer = document.getElementById('chatContainer');
                const chatToggleBtn = document.getElementById('chatToggleBtn');
                
                if (isChatOpen && 
                    !chatContainer.contains(e.target) && 
                    !chatToggleBtn.contains(e.target)) {
                    toggleChat();
                }
            });
        }

    </script>
</body>
</html>
